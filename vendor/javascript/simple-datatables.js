const t=C=>"[object Object]"===Object.prototype.toString.call(C),e=C=>{let A=!1;try{A=JSON.parse(C)}catch(C){return!1}return!(null===A||!Array.isArray(A)&&!t(A))&&A},s=(C,A)=>{const L=document.createElement(C);if(A&&"object"==typeof A)for(const C in A)"html"===C?L.innerHTML=A[C]:L.setAttribute(C,A[C]);return L},i=C=>["#text","#comment"].includes(C.nodeName)?C.data:C.childNodes?C.childNodes.map((C=>i(C))).join(""):"",n=C=>{if(null==C)return"";if(C.hasOwnProperty("text")||C.hasOwnProperty("data")){const A=C;return A.text??n(A.data)}return C.hasOwnProperty("nodeName")?i(C):String(C)},a=function(C){return C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},o=function(C,A){let L=0,R=0;for(;L<C+1;)A[R].hidden||(L+=1),R+=1;return R-1},r=function(C){const A={};if(C)for(const L of C)A[L.name]=L.value;return A},l=C=>C?C.trim().split(" ").map((C=>`.${C}`)).join(""):null,d=(C,A)=>{const L=A?.split(" ").some((A=>!C.classList.contains(A)));return!L},c=(C,A)=>C?A?`${C} ${A}`:C:A||"",h=function(C,A=300){let L;return(...R)=>{clearTimeout(L),L=window.setTimeout((()=>C()),A)}};var u=function(){return u=Object.assign||function(C){for(var A,L=arguments,R=1,Y=arguments.length;R<Y;R++)for(var j in A=L[R])Object.prototype.hasOwnProperty.call(A,j)&&(C[j]=A[j]);return C},u.apply(this,arguments)};function p(C,A,L){if(L||2===arguments.length)for(var R,Y=0,j=A.length;Y<j;Y++)!R&&Y in A||(R||(R=Array.prototype.slice.call(A,0,Y)),R[Y]=A[Y]);return C.concat(R||Array.prototype.slice.call(A))}"function"==typeof SuppressedError&&SuppressedError;var C=function(){function t(C){void 0===C&&(C={});var A=this;Object.entries(C).forEach((function(C){var L=C[0],R=C[1];return A[L]=R}))}return t.prototype.toString=function(){return JSON.stringify(this)},t.prototype.setValue=function(C,A){return this[C]=A,this},t}();function m(C){for(var A=arguments,L=[],R=1;R<arguments.length;R++)L[R-1]=A[R];return null!=C&&L.some((function(A){var L,R;return"function"==typeof(null===(R=null===(L=null==C?void 0:C.ownerDocument)||void 0===L?void 0:L.defaultView)||void 0===R?void 0:R[A])&&C instanceof C.ownerDocument.defaultView[A]}))}function g(C,A,L){var R;return"#text"===C.nodeName?R=L.document.createTextNode(C.data):"#comment"===C.nodeName?R=L.document.createComment(C.data):(A?(R=L.document.createElementNS("http://www.w3.org/2000/svg",C.nodeName),"foreignObject"===C.nodeName&&(A=!1)):"svg"===C.nodeName.toLowerCase()?(R=L.document.createElementNS("http://www.w3.org/2000/svg","svg"),A=!0):R=L.document.createElement(C.nodeName),C.attributes&&Object.entries(C.attributes).forEach((function(C){var A=C[0],L=C[1];return R.setAttribute(A,L)})),C.childNodes&&C.childNodes.forEach((function(C){return R.appendChild(g(C,A,L))})),L.valueDiffing&&(C.value&&m(R,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(R.value=C.value),C.checked&&m(R,"HTMLInputElement")&&(R.checked=C.checked),C.selected&&m(R,"HTMLOptionElement")&&(R.selected=C.selected))),R}var b=function(C,A){for(A=A.slice();A.length>0;){var L=A.splice(0,1)[0];C=C.childNodes[L]}return C};function v(C,A,L){var R,Y,j,F=A[L._const.action],U=A[L._const.route];[L._const.addElement,L._const.addTextElement].includes(F)||(R=b(C,U));var J={diff:A,node:R};if(L.preDiffApply(J))return!0;switch(F){case L._const.addAttribute:if(!R||!m(R,"Element"))return!1;R.setAttribute(A[L._const.name],A[L._const.value]);break;case L._const.modifyAttribute:if(!R||!m(R,"Element"))return!1;R.setAttribute(A[L._const.name],A[L._const.newValue]),m(R,"HTMLInputElement")&&"value"===A[L._const.name]&&(R.value=A[L._const.newValue]);break;case L._const.removeAttribute:if(!R||!m(R,"Element"))return!1;R.removeAttribute(A[L._const.name]);break;case L._const.modifyTextElement:if(!R||!m(R,"Text"))return!1;L.textDiff(R,R.data,A[L._const.oldValue],A[L._const.newValue]),m(R.parentNode,"HTMLTextAreaElement")&&(R.parentNode.value=A[L._const.newValue]);break;case L._const.modifyValue:if(!R||void 0===R.value)return!1;R.value=A[L._const.newValue];break;case L._const.modifyComment:if(!R||!m(R,"Comment"))return!1;L.textDiff(R,R.data,A[L._const.oldValue],A[L._const.newValue]);break;case L._const.modifyChecked:if(!R||void 0===R.checked)return!1;R.checked=A[L._const.newValue];break;case L._const.modifySelected:if(!R||void 0===R.selected)return!1;R.selected=A[L._const.newValue];break;case L._const.replaceElement:var W="svg"===A[L._const.newValue].nodeName.toLowerCase()||"http://www.w3.org/2000/svg"===R.parentNode.namespaceURI;R.parentNode.replaceChild(g(A[L._const.newValue],W,L),R);break;case L._const.relocateGroup:p([],new Array(A[L._const.groupLength]),!0).map((function(){return R.removeChild(R.childNodes[A[L._const.from]])})).forEach((function(C,Y){0===Y&&(j=R.childNodes[A[L._const.to]]),R.insertBefore(C,j||null)}));break;case L._const.removeElement:R.parentNode.removeChild(R);break;case L._const.addElement:var Q=(ut=U.slice()).splice(ut.length-1,1)[0];if(!m(R=b(C,ut),"Element"))return!1;R.insertBefore(g(A[L._const.element],"http://www.w3.org/2000/svg"===R.namespaceURI,L),R.childNodes[Q]||null);break;case L._const.removeTextElement:if(!R||3!==R.nodeType)return!1;var st=R.parentNode;st.removeChild(R),m(st,"HTMLTextAreaElement")&&(st.value="");break;case L._const.addTextElement:var ut;Q=(ut=U.slice()).splice(ut.length-1,1)[0];if(Y=L.document.createTextNode(A[L._const.value]),!(R=b(C,ut)).childNodes)return!1;R.insertBefore(Y,R.childNodes[Q]||null),m(R.parentNode,"HTMLTextAreaElement")&&(R.parentNode.value=A[L._const.value]);break;default:console.log("unknown action")}return L.postDiffApply({diff:J.diff,node:J.node,newNode:Y}),!0}function _(C,A,L){var R=C[A];C[A]=C[L],C[L]=R}function w(C,A,L){(A=A.slice()).reverse(),A.forEach((function(A){!function(C,A,L){switch(A[L._const.action]){case L._const.addAttribute:A[L._const.action]=L._const.removeAttribute,v(C,A,L);break;case L._const.modifyAttribute:_(A,L._const.oldValue,L._const.newValue),v(C,A,L);break;case L._const.removeAttribute:A[L._const.action]=L._const.addAttribute,v(C,A,L);break;case L._const.modifyTextElement:case L._const.modifyValue:case L._const.modifyComment:case L._const.modifyChecked:case L._const.modifySelected:case L._const.replaceElement:_(A,L._const.oldValue,L._const.newValue),v(C,A,L);break;case L._const.relocateGroup:_(A,L._const.from,L._const.to),v(C,A,L);break;case L._const.removeElement:A[L._const.action]=L._const.addElement,v(C,A,L);break;case L._const.addElement:A[L._const.action]=L._const.removeElement,v(C,A,L);break;case L._const.removeTextElement:A[L._const.action]=L._const.addTextElement,v(C,A,L);break;case L._const.addTextElement:A[L._const.action]=L._const.removeTextElement,v(C,A,L);break;default:console.log("unknown action")}}(C,A,L)}))}var y=function(C){var A=[];return A.push(C.nodeName),"#text"!==C.nodeName&&"#comment"!==C.nodeName&&C.attributes&&(C.attributes.class&&A.push("".concat(C.nodeName,".").concat(C.attributes.class.replace(/ /g,"."))),C.attributes.id&&A.push("".concat(C.nodeName,"#").concat(C.attributes.id))),A},M=function(C){var A={},L={};return C.forEach((function(C){y(C).forEach((function(C){var R=C in A;R||C in L?R&&(delete A[C],L[C]=!0):A[C]=!0}))})),A},D=function(C,A){var L=M(C),R=M(A),Y={};return Object.keys(L).forEach((function(C){R[C]&&(Y[C]=!0)})),Y},N=function(C){return delete C.outerDone,delete C.innerDone,delete C.valueDone,!C.childNodes||C.childNodes.every(N)},O=function(C){if(Object.prototype.hasOwnProperty.call(C,"data"))return{nodeName:"#text"===C.nodeName?"#text":"#comment",data:C.data};var A={nodeName:C.nodeName};return Object.prototype.hasOwnProperty.call(C,"attributes")&&(A.attributes=u({},C.attributes)),Object.prototype.hasOwnProperty.call(C,"checked")&&(A.checked=C.checked),Object.prototype.hasOwnProperty.call(C,"value")&&(A.value=C.value),Object.prototype.hasOwnProperty.call(C,"selected")&&(A.selected=C.selected),Object.prototype.hasOwnProperty.call(C,"childNodes")&&(A.childNodes=C.childNodes.map((function(C){return O(C)}))),A},x=function(C,A){if(!["nodeName","value","checked","selected","data"].every((function(L){return C[L]===A[L]})))return!1;if(Object.prototype.hasOwnProperty.call(C,"data"))return!0;if(Boolean(C.attributes)!==Boolean(A.attributes))return!1;if(Boolean(C.childNodes)!==Boolean(A.childNodes))return!1;if(C.attributes){var L=Object.keys(C.attributes),R=Object.keys(A.attributes);if(L.length!==R.length)return!1;if(!L.every((function(L){return C.attributes[L]===A.attributes[L]})))return!1}if(C.childNodes){if(C.childNodes.length!==A.childNodes.length)return!1;if(!C.childNodes.every((function(C,L){return x(C,A.childNodes[L])})))return!1}return!0},E=function(C,A,L,R,Y){if(void 0===Y&&(Y=!1),!C||!A)return!1;if(C.nodeName!==A.nodeName)return!1;if(["#text","#comment"].includes(C.nodeName))return!!Y||C.data===A.data;if(C.nodeName in L)return!0;if(C.attributes&&A.attributes){if(C.attributes.id){if(C.attributes.id!==A.attributes.id)return!1;if("".concat(C.nodeName,"#").concat(C.attributes.id)in L)return!0}if(C.attributes.class&&C.attributes.class===A.attributes.class&&"".concat(C.nodeName,".").concat(C.attributes.class.replace(/ /g,"."))in L)return!0}if(R)return!0;var j=C.childNodes?C.childNodes.slice().reverse():[],F=A.childNodes?A.childNodes.slice().reverse():[];if(j.length!==F.length)return!1;if(Y)return j.every((function(C,A){return C.nodeName===F[A].nodeName}));var U=D(j,F);return j.every((function(C,A){return E(C,F[A],U,!0,!0)}))},V=function(C,A){return p([],new Array(C),!0).map((function(){return A}))},$=function(C,A){for(var L=C.childNodes?C.childNodes:[],R=A.childNodes?A.childNodes:[],Y=V(L.length,!1),j=V(R.length,!1),F=[],r=function(){return arguments[1]},U=!1,d=function(){var C=function(C,A,L,R){var Y=0,j=[],F=C.length,U=A.length,J=p([],new Array(F+1),!0).map((function(){return[]})),W=D(C,A),Q=F===U;Q&&C.some((function(C,L){var R=y(C),Y=y(A[L]);return R.length!==Y.length?(Q=!1,!0):(R.some((function(C,A){if(C!==Y[A])return Q=!1,!0})),!Q||void 0)}));for(var st=0;st<F;st++)for(var ut=C[st],mt=0;mt<U;mt++){var vt=A[mt];L[st]||R[mt]||!E(ut,vt,W,Q)?J[st+1][mt+1]=0:(J[st+1][mt+1]=J[st][mt]?J[st][mt]+1:1,J[st+1][mt+1]>=Y&&(Y=J[st+1][mt+1],j=[st+1,mt+1]))}return 0!==Y&&{oldValue:j[0]-Y,newValue:j[1]-Y,length:Y}}(L,R,Y,j);C?(F.push(C),p([],new Array(C.length),!0).map(r).forEach((function(A){return function(C,A,L,R){C[L.oldValue+R]=!0,A[L.newValue+R]=!0}(Y,j,C,A)}))):U=!0};!U;)d();return C.subsets=F,C.subsetsAge=100,F},A=function(){function t(){this.list=[]}return t.prototype.add=function(C){var A;(A=this.list).push.apply(A,C)},t.prototype.forEach=function(C){this.list.forEach((function(A){return C(A)}))},t}();function k(C,A){var L,R,Y=C;for(A=A.slice();A.length>0;)R=A.splice(0,1)[0],L=Y,Y=Y.childNodes?Y.childNodes[R]:void 0;return{node:Y,parentNode:L,nodeIndex:R}}function S(C,A,L){return A.forEach((function(A){!function(C,A,L){var R,Y,j,F;if(![L._const.addElement,L._const.addTextElement].includes(A[L._const.action])){var U=k(C,A[L._const.route]);Y=U.node,j=U.parentNode,F=U.nodeIndex}var J,W,Q=[],st={diff:A,node:Y};if(L.preVirtualDiffApply(st))return!0;switch(A[L._const.action]){case L._const.addAttribute:Y.attributes||(Y.attributes={}),Y.attributes[A[L._const.name]]=A[L._const.value],"checked"===A[L._const.name]?Y.checked=!0:"selected"===A[L._const.name]?Y.selected=!0:"INPUT"===Y.nodeName&&"value"===A[L._const.name]&&(Y.value=A[L._const.value]);break;case L._const.modifyAttribute:Y.attributes[A[L._const.name]]=A[L._const.newValue];break;case L._const.removeAttribute:delete Y.attributes[A[L._const.name]],0===Object.keys(Y.attributes).length&&delete Y.attributes,"checked"===A[L._const.name]?Y.checked=!1:"selected"===A[L._const.name]?delete Y.selected:"INPUT"===Y.nodeName&&"value"===A[L._const.name]&&delete Y.value;break;case L._const.modifyTextElement:Y.data=A[L._const.newValue],"TEXTAREA"===j.nodeName&&(j.value=A[L._const.newValue]);break;case L._const.modifyValue:Y.value=A[L._const.newValue];break;case L._const.modifyComment:Y.data=A[L._const.newValue];break;case L._const.modifyChecked:Y.checked=A[L._const.newValue];break;case L._const.modifySelected:Y.selected=A[L._const.newValue];break;case L._const.replaceElement:J=O(A[L._const.newValue]),j.childNodes[F]=J;break;case L._const.relocateGroup:Y.childNodes.splice(A[L._const.from],A[L._const.groupLength]).reverse().forEach((function(C){return Y.childNodes.splice(A[L._const.to],0,C)})),Y.subsets&&Y.subsets.forEach((function(C){if(A[L._const.from]<A[L._const.to]&&C.oldValue<=A[L._const.to]&&C.oldValue>A[L._const.from])C.oldValue-=A[L._const.groupLength],(R=C.oldValue+C.length-A[L._const.to])>0&&(Q.push({oldValue:A[L._const.to]+A[L._const.groupLength],newValue:C.newValue+C.length-R,length:R}),C.length-=R);else if(A[L._const.from]>A[L._const.to]&&C.oldValue>A[L._const.to]&&C.oldValue<A[L._const.from]){var R;C.oldValue+=A[L._const.groupLength],(R=C.oldValue+C.length-A[L._const.to])>0&&(Q.push({oldValue:A[L._const.to]+A[L._const.groupLength],newValue:C.newValue+C.length-R,length:R}),C.length-=R)}else C.oldValue===A[L._const.from]&&(C.oldValue=A[L._const.to])}));break;case L._const.removeElement:j.childNodes.splice(F,1),j.subsets&&j.subsets.forEach((function(C){C.oldValue>F?C.oldValue-=1:C.oldValue===F?C.delete=!0:C.oldValue<F&&C.oldValue+C.length>F&&(C.oldValue+C.length-1===F?C.length--:(Q.push({newValue:C.newValue+F-C.oldValue,oldValue:F,length:C.length-F+C.oldValue-1}),C.length=F-C.oldValue))})),Y=j;break;case L._const.addElement:var ut=(W=A[L._const.route].slice()).splice(W.length-1,1)[0];Y=null===(R=k(C,W))||void 0===R?void 0:R.node,J=O(A[L._const.element]),Y.childNodes||(Y.childNodes=[]),ut>=Y.childNodes.length?Y.childNodes.push(J):Y.childNodes.splice(ut,0,J),Y.subsets&&Y.subsets.forEach((function(C){if(C.oldValue>=ut)C.oldValue+=1;else if(C.oldValue<ut&&C.oldValue+C.length>ut){var A=C.oldValue+C.length-ut;Q.push({newValue:C.newValue+C.length-A,oldValue:ut+1,length:A}),C.length-=A}}));break;case L._const.removeTextElement:j.childNodes.splice(F,1),"TEXTAREA"===j.nodeName&&delete j.value,j.subsets&&j.subsets.forEach((function(C){C.oldValue>F?C.oldValue-=1:C.oldValue===F?C.delete=!0:C.oldValue<F&&C.oldValue+C.length>F&&(C.oldValue+C.length-1===F?C.length--:(Q.push({newValue:C.newValue+F-C.oldValue,oldValue:F,length:C.length-F+C.oldValue-1}),C.length=F-C.oldValue))})),Y=j;break;case L._const.addTextElement:var mt=(W=A[L._const.route].slice()).splice(W.length-1,1)[0];J={nodeName:"#text",data:A[L._const.value]},(Y=k(C,W).node).childNodes||(Y.childNodes=[]),mt>=Y.childNodes.length?Y.childNodes.push(J):Y.childNodes.splice(mt,0,J),"TEXTAREA"===Y.nodeName&&(Y.value=A[L._const.newValue]),Y.subsets&&Y.subsets.forEach((function(C){if(C.oldValue>=mt&&(C.oldValue+=1),C.oldValue<mt&&C.oldValue+C.length>mt){var A=C.oldValue+C.length-mt;Q.push({newValue:C.newValue+C.length-A,oldValue:mt+1,length:A}),C.length-=A}}));break;default:console.log("unknown action")}Y.subsets&&(Y.subsets=Y.subsets.filter((function(C){return!C.delete&&C.oldValue!==C.newValue})),Q.length&&(Y.subsets=Y.subsets.concat(Q))),L.postVirtualDiffApply({node:st.node,diff:st.diff,newNode:J})}(C,A,L)})),!0}function T(C,A){void 0===A&&(A={valueDiffing:!0});var L={nodeName:C.nodeName};if(m(C,"Text","Comment"))L.data=C.data;else{C.attributes&&C.attributes.length>0&&(L.attributes={},Array.prototype.slice.call(C.attributes).forEach((function(C){return L.attributes[C.name]=C.value})));C.childNodes&&C.childNodes.length>0&&(L.childNodes=[],Array.prototype.slice.call(C.childNodes).forEach((function(C){return L.childNodes.push(T(C,A))})));A.valueDiffing&&(m(C,"HTMLTextAreaElement")&&(L.value=C.value),m(C,"HTMLInputElement")&&["radio","checkbox"].includes(C.type.toLowerCase())&&void 0!==C.checked?L.checked=C.checked:m(C,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(L.value=C.value),m(C,"HTMLOptionElement")&&(L.selected=C.selected))}return L}var L=/<\s*\/*[a-zA-Z:_][a-zA-Z0-9:_\-.]*\s*(?:"[^"]*"['"]*|'[^']*'['"]*|[^'"/>])*\/*\s*>|<!--(?:.|\n|\r)*?-->/g,R=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function P(C){return C.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}var Y={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},H=function(C,A){var L={nodeName:"",attributes:{}},j=!1,F=C.match(/<\/?([^\s]+?)[/\s>]/);if(F&&(L.nodeName=A||"svg"===F[1]?F[1]:F[1].toUpperCase(),(Y[F[1]]||"/"===C.charAt(C.length-2))&&(j=!0),L.nodeName.startsWith("!--"))){var U=C.indexOf("--\x3e");return{type:"comment",node:{nodeName:"#comment",data:-1!==U?C.slice(4,U):""},voidElement:j}}for(var J=new RegExp(R),W=null,Q=!1;!Q;)if(null===(W=J.exec(C)))Q=!0;else if(W[0].trim())if(W[1]){var st=W[1].trim(),ut=[st,""];st.indexOf("=")>-1&&(ut=st.split("=")),L.attributes[ut[0]]=ut[1],J.lastIndex--}else W[2]&&(L.attributes[W[2]]=W[3].trim().substring(1,W[3].length-1));return{type:"tag",node:L,voidElement:j}},I=function(C,A){void 0===A&&(A={valueDiffing:!0,caseSensitive:!1});var R,Y=[],j=-1,F=[],U=!1;if(0!==C.indexOf("<")){var J=C.indexOf("<");Y.push({nodeName:"#text",data:-1===J?C:C.substring(0,J)})}return C.replace(L,(function(L,J){var W="/"!==L.charAt(1),Q=L.startsWith("\x3c!--"),st=J+L.length,ut=C.charAt(st);if(Q){var mt=H(L,A.caseSensitive).node;if(j<0)return Y.push(mt),"";var vt=F[j];return vt&&mt.nodeName&&(vt.node.childNodes||(vt.node.childNodes=[]),vt.node.childNodes.push(mt)),""}if(W){if("svg"===(R=H(L,A.caseSensitive||U)).node.nodeName&&(U=!0),j++,!R.voidElement&&ut&&"<"!==ut){R.node.childNodes||(R.node.childNodes=[]);var _t=P(C.slice(st,C.indexOf("<",st)));R.node.childNodes.push({nodeName:"#text",data:_t}),A.valueDiffing&&"TEXTAREA"===R.node.nodeName&&(R.node.value=_t)}0===j&&R.node.nodeName&&Y.push(R.node);var wt=F[j-1];wt&&R.node.nodeName&&(wt.node.childNodes||(wt.node.childNodes=[]),wt.node.childNodes.push(R.node)),F[j]=R}if((!W||R.voidElement)&&(j>-1&&(R.voidElement||A.caseSensitive&&R.node.nodeName===L.slice(2,-1)||!A.caseSensitive&&R.node.nodeName.toUpperCase()===L.slice(2,-1).toUpperCase())&&--j>-1&&("svg"===R.node.nodeName&&(U=!1),R=F[j]),"<"!==ut&&ut)){var yt=-1===j?Y:F[j].node.childNodes||[],Mt=C.indexOf("<",st);_t=P(C.slice(st,-1===Mt?void 0:Mt));yt.push({nodeName:"#text",data:_t})}return""})),Y[0]},j=function(){function t(C,L,R){this.options=R,this.t1="undefined"!=typeof Element&&m(C,"Element")?T(C,this.options):"string"==typeof C?I(C,this.options):JSON.parse(JSON.stringify(C)),this.t2="undefined"!=typeof Element&&m(L,"Element")?T(L,this.options):"string"==typeof L?I(L,this.options):JSON.parse(JSON.stringify(L)),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig="undefined"!=typeof Element&&m(C,"Element")?T(C,this.options):"string"==typeof C?I(C,this.options):JSON.parse(JSON.stringify(C)),this.t2Orig="undefined"!=typeof Element&&m(L,"Element")?T(L,this.options):"string"==typeof L?I(L,this.options):JSON.parse(JSON.stringify(L))),this.tracker=new A}return t.prototype.init=function(){return this.findDiffs(this.t1,this.t2)},t.prototype.findDiffs=function(C,A){var L;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw new Error("surpassed diffcap:".concat(JSON.stringify(this.t1Orig)," -> ").concat(JSON.stringify(this.t2Orig)));0===(L=this.findNextDiff(C,A,[])).length&&(x(C,A)||(this.foundAll?console.error("Could not find remaining diffs!"):(this.foundAll=!0,N(C),L=this.findNextDiff(C,A,[])))),L.length>0&&(this.foundAll=!1,this.tracker.add(L),S(C,L,this.options))}while(L.length>0);return this.tracker.list},t.prototype.findNextDiff=function(C,A,L){var R,Y;if(this.options.maxDepth&&L.length>this.options.maxDepth)return[];if(!C.outerDone){if(R=this.findOuterDiff(C,A,L),this.options.filterOuterDiff&&(Y=this.options.filterOuterDiff(C,A,R))&&(R=Y),R.length>0)return C.outerDone=!0,R;C.outerDone=!0}if(Object.prototype.hasOwnProperty.call(C,"data"))return[];if(!C.innerDone){if((R=this.findInnerDiff(C,A,L)).length>0)return R;C.innerDone=!0}if(this.options.valueDiffing&&!C.valueDone){if((R=this.findValueDiff(C,A,L)).length>0)return C.valueDone=!0,R;C.valueDone=!0}return[]},t.prototype.findOuterDiff=function(A,L,R){var Y,j,F,U,J,W,Q=[];if(A.nodeName!==L.nodeName){if(!R.length)throw new Error("Top level nodes have to be of the same kind.");return[(new C).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,O(A)).setValue(this.options._const.newValue,O(L)).setValue(this.options._const.route,R)]}if(R.length&&this.options.diffcap<Math.abs((A.childNodes||[]).length-(L.childNodes||[]).length))return[(new C).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,O(A)).setValue(this.options._const.newValue,O(L)).setValue(this.options._const.route,R)];if(Object.prototype.hasOwnProperty.call(A,"data")&&A.data!==L.data)return"#text"===A.nodeName?[(new C).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,R).setValue(this.options._const.oldValue,A.data).setValue(this.options._const.newValue,L.data)]:[(new C).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,R).setValue(this.options._const.oldValue,A.data).setValue(this.options._const.newValue,L.data)];for(j=A.attributes?Object.keys(A.attributes).sort():[],F=L.attributes?Object.keys(L.attributes).sort():[],U=j.length,W=0;W<U;W++)Y=j[W],-1===(J=F.indexOf(Y))?Q.push((new C).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,R).setValue(this.options._const.name,Y).setValue(this.options._const.value,A.attributes[Y])):(F.splice(J,1),A.attributes[Y]!==L.attributes[Y]&&Q.push((new C).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,R).setValue(this.options._const.name,Y).setValue(this.options._const.oldValue,A.attributes[Y]).setValue(this.options._const.newValue,L.attributes[Y])));for(U=F.length,W=0;W<U;W++)Y=F[W],Q.push((new C).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,R).setValue(this.options._const.name,Y).setValue(this.options._const.value,L.attributes[Y]));return Q},t.prototype.findInnerDiff=function(A,L,R){var Y=A.childNodes?A.childNodes.slice():[],j=L.childNodes?L.childNodes.slice():[],F=Math.max(Y.length,j.length),U=Math.abs(Y.length-j.length),J=[],W=0;if(!this.options.maxChildCount||F<this.options.maxChildCount){var Q=Boolean(A.subsets&&A.subsetsAge--),st=Q?A.subsets:A.childNodes&&L.childNodes?$(A,L):[];if(st.length>0&&(J=this.attemptGroupRelocation(A,L,st,R,Q)).length>0)return J}for(var ut=0;ut<F;ut+=1){var mt=Y[ut],vt=j[ut];U&&(mt&&!vt?"#text"===mt.nodeName?(J.push((new C).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,R.concat(W)).setValue(this.options._const.value,mt.data)),W-=1):(J.push((new C).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,R.concat(W)).setValue(this.options._const.element,O(mt))),W-=1):vt&&!mt&&("#text"===vt.nodeName?J.push((new C).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,R.concat(W)).setValue(this.options._const.value,vt.data)):J.push((new C).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,R.concat(W)).setValue(this.options._const.element,O(vt))))),mt&&vt&&(!this.options.maxChildCount||F<this.options.maxChildCount?J=J.concat(this.findNextDiff(mt,vt,R.concat(W))):x(mt,vt)||(Y.length>j.length?("#text"===mt.nodeName?J.push((new C).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,R.concat(W)).setValue(this.options._const.value,mt.data)):J.push((new C).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,O(mt)).setValue(this.options._const.route,R.concat(W))),Y.splice(ut,1),ut-=1,W-=1,U-=1):Y.length<j.length?(J=J.concat([(new C).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,O(vt)).setValue(this.options._const.route,R.concat(W))]),Y.splice(ut,0,O(vt)),U-=1):J=J.concat([(new C).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,O(mt)).setValue(this.options._const.newValue,O(vt)).setValue(this.options._const.route,R.concat(W))]))),W+=1}return A.innerDone=!0,J},t.prototype.attemptGroupRelocation=function(A,L,R,Y,j){for(var F,U,J,W,Q,st=function(C,A,L){var R=C.childNodes?V(C.childNodes.length,!0):[],Y=A.childNodes?V(A.childNodes.length,!0):[],j=0;return L.forEach((function(C){for(var A=C.oldValue+C.length,L=C.newValue+C.length,F=C.oldValue;F<A;F+=1)R[F]=j;for(F=C.newValue;F<L;F+=1)Y[F]=j;j+=1})),{gaps1:R,gaps2:Y}}(A,L,R),ut=st.gaps1,mt=st.gaps2,vt=A.childNodes.slice(),_t=L.childNodes.slice(),wt=Math.min(ut.length,mt.length),yt=[],Mt=0,Dt=0;Mt<wt;Dt+=1,Mt+=1)if(!j||!0!==ut[Mt]&&!0!==mt[Mt])if(!0===ut[Dt])if("#text"===(W=vt[Dt]).nodeName)if("#text"===_t[Mt].nodeName){if(W.data!==_t[Mt].data){for(var Nt=Dt;vt.length>Nt+1&&"#text"===vt[Nt+1].nodeName;)if(Nt+=1,_t[Mt].data===vt[Nt].data){Q=!0;break}Q||yt.push((new C).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,Y.concat(Dt)).setValue(this.options._const.oldValue,W.data).setValue(this.options._const.newValue,_t[Mt].data))}}else yt.push((new C).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,Y.concat(Dt)).setValue(this.options._const.value,W.data)),ut.splice(Dt,1),vt.splice(Dt,1),wt=Math.min(ut.length,mt.length),Dt-=1,Mt-=1;else!0===mt[Mt]?yt.push((new C).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,O(W)).setValue(this.options._const.newValue,O(_t[Mt])).setValue(this.options._const.route,Y.concat(Dt))):(yt.push((new C).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,Y.concat(Dt)).setValue(this.options._const.element,O(W))),ut.splice(Dt,1),vt.splice(Dt,1),wt=Math.min(ut.length,mt.length),Dt-=1,Mt-=1);else if(!0===mt[Mt])"#text"===(W=_t[Mt]).nodeName?(yt.push((new C).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,Y.concat(Dt)).setValue(this.options._const.value,W.data)),ut.splice(Dt,0,!0),vt.splice(Dt,0,{nodeName:"#text",data:W.data}),wt=Math.min(ut.length,mt.length)):(yt.push((new C).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,Y.concat(Dt)).setValue(this.options._const.element,O(W))),ut.splice(Dt,0,!0),vt.splice(Dt,0,O(W)),wt=Math.min(ut.length,mt.length));else if(ut[Dt]!==mt[Mt]){if(yt.length>0)return yt;if(J=R[ut[Dt]],(U=Math.min(J.newValue,vt.length-J.length))!==J.oldValue){F=!1;for(var xt=0;xt<J.length;xt+=1)E(vt[U+xt],vt[J.oldValue+xt],{},!1,!0)||(F=!0);if(F)return[(new C).setValue(this.options._const.action,this.options._const.relocateGroup).setValue(this.options._const.groupLength,J.length).setValue(this.options._const.from,J.oldValue).setValue(this.options._const.to,U).setValue(this.options._const.route,Y)]}}return yt},t.prototype.findValueDiff=function(A,L,R){var Y=[];return A.selected!==L.selected&&Y.push((new C).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,A.selected).setValue(this.options._const.newValue,L.selected).setValue(this.options._const.route,R)),(A.value||L.value)&&A.value!==L.value&&"OPTION"!==A.nodeName&&Y.push((new C).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,A.value||"").setValue(this.options._const.newValue,L.value||"").setValue(this.options._const.route,R)),A.checked!==L.checked&&Y.push((new C).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,A.checked).setValue(this.options._const.newValue,L.checked).setValue(this.options._const.route,R)),Y},t}(),F={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff:function(C,A,L,R){C.data=R},preVirtualDiffApply:function(){},postVirtualDiffApply:function(){},preDiffApply:function(){},postDiffApply:function(){},filterOuterDiff:null,compress:!1,_const:!1,document:!("undefined"==typeof window||!window.document)&&window.document,components:[]},U=function(){function t(C){if(void 0===C&&(C={}),Object.entries(F).forEach((function(A){var L=A[0],R=A[1];Object.prototype.hasOwnProperty.call(C,L)||(C[L]=R)})),!C._const){var A=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","groupLength","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"],L={};C.compress?A.forEach((function(C,A){return L[C]=A})):A.forEach((function(C){return L[C]=C})),C._const=L}this.options=C}return t.prototype.apply=function(C,A){return function(C,A,L){return A.every((function(A){return v(C,A,L)}))}(C,A,this.options)},t.prototype.undo=function(C,A){return w(C,A,this.options)},t.prototype.diff=function(C,A){return new j(C,A,this.options).init()},t}();const q=(C,A,L,{classes:R,format:Y,hiddenHeader:j,sortable:F,scrollY:U,type:J},{noColumnWidths:W,unhideHeader:Q})=>({nodeName:"TR",childNodes:C.map(((C,st)=>{const ut=A[st]||{type:J,format:Y,sortable:!0,searchable:!0};if(ut.hidden)return;const mt=C.attributes?{...C.attributes}:{};if(ut.sortable&&F&&(!U.length||Q)&&(ut.filter?mt["data-filterable"]="true":mt["data-sortable"]="true"),ut.headerClass&&(mt.class=c(mt.class,ut.headerClass)),L.sort&&L.sort.column===st){const C="asc"===L.sort.dir?R.ascending:R.descending;mt.class=c(mt.class,C),mt["aria-sort"]="asc"===L.sort.dir?"ascending":"descending"}else L.filters[st]&&(mt.class=c(mt.class,R.filterActive));if(L.widths[st]&&!W){const C=`width: ${L.widths[st]}%;`;mt.style=c(mt.style,C)}if(U.length&&!Q){const C="padding-bottom: 0;padding-top: 0;border: 0;";mt.style=c(mt.style,C)}const vt="html"===C.type?C.data:[{nodeName:"#text",data:C.text??String(C.data)}];return{nodeName:"TH",attributes:mt,childNodes:!j&&!U.length||Q?ut.sortable&&F?[{nodeName:"BUTTON",attributes:{class:ut.filter?R.filter:R.sorter},childNodes:vt}]:vt:[{nodeName:"#text",data:""}]}})).filter((C=>C))}),B=(C,A,L,R,Y,j,{classes:F,hiddenHeader:U,header:J,footer:W,format:Q,sortable:st,scrollY:ut,type:mt,rowRender:vt,tabIndex:_t},{noColumnWidths:wt,unhideHeader:yt,renderHeader:Mt},Dt,Nt)=>{const xt={nodeName:"TABLE",attributes:{...C},childNodes:[{nodeName:"TBODY",childNodes:L.map((({row:C,index:A})=>{const L={nodeName:"TR",attributes:{...C.attributes,"data-index":String(A)},childNodes:C.cells.map(((C,L)=>{const j=R[L]||{type:mt,format:Q,sortable:!0,searchable:!0};if(j.hidden)return;const F={nodeName:"TD",attributes:C.attributes?{...C.attributes}:{},childNodes:"html"===j.type?C.data:[{nodeName:"#text",data:n(C)}]};if(J||W||!Y.widths[L]||wt||(F.attributes.style=c(F.attributes.style,`width: ${Y.widths[L]}%;`)),j.cellClass&&(F.attributes.class=c(F.attributes.class,j.cellClass)),j.render){const R=j.render(C.data,F,A,L);if(R){if("string"!=typeof R)return R;{const C=I(`<td>${R}</td>`);1===C.childNodes.length&&["#text","#comment"].includes(C.childNodes[0].nodeName)?F.childNodes[0].data=R:F.childNodes=C.childNodes}}}return F})).filter((C=>C))};if(A===j&&(L.attributes.class=c(L.attributes.class,F.cursor)),vt){const R=vt(C,L,A);if(R){if("string"!=typeof R)return R;{const C=I(`<tr>${R}</tr>`);!C.childNodes||1===C.childNodes.length&&["#text","#comment"].includes(C.childNodes[0].nodeName)?L.childNodes[0].data=R:L.childNodes=C.childNodes}}}return L}))}]};if(xt.attributes.class=c(xt.attributes.class,F.table),J||W||Mt){const C=q(A,R,Y,{classes:F,hiddenHeader:U,sortable:st,scrollY:ut},{noColumnWidths:wt,unhideHeader:yt});if(J||Mt){const A={nodeName:"THEAD",childNodes:[C]};!ut.length&&!U||yt||(A.attributes={style:"height: 0px;"}),xt.childNodes.unshift(A)}if(W){const A={nodeName:"TFOOT",childNodes:[J?structuredClone(C):C]};!ut.length&&!U||yt||(A.attributes={style:"height: 0px;"}),xt.childNodes.push(A)}}return Dt.forEach((C=>xt.childNodes.push(C))),Nt.forEach((C=>xt.childNodes.push(C))),!1!==_t&&(xt.attributes.tabindex=String(_t)),xt};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function z(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var J={exports:{}},W=z(J.exports=function(){var C=1e3,A=6e4,L=36e5,R="millisecond",Y="second",j="minute",F="hour",U="day",J="week",W="month",Q="quarter",st="year",ut="date",mt="Invalid Date",vt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_t=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,wt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(C){var A=["th","st","nd","rd"],L=C%100;return"["+C+(A[(L-20)%10]||A[L]||A[0])+"]"}},b=function(C,A,L){var R=String(C);return!R||R.length>=A?C:""+Array(A+1-R.length).join(L)+C},yt={s:b,z:function(C){var A=-C.utcOffset(),L=Math.abs(A),R=Math.floor(L/60),Y=L%60;return(A<=0?"+":"-")+b(R,2,"0")+":"+b(Y,2,"0")},m:function t(C,A){if(C.date()<A.date())return-t(A,C);var L=12*(A.year()-C.year())+(A.month()-C.month()),R=C.clone().add(L,W),Y=A-R<0,j=C.clone().add(L+(Y?-1:1),W);return+(-(L+(A-R)/(Y?R-j:j-R))||0)},a:function(C){return C<0?Math.ceil(C)||0:Math.floor(C)},p:function(C){return{M:W,y:st,w:J,d:U,D:ut,h:F,m:j,s:Y,ms:R,Q:Q}[C]||String(C||"").toLowerCase().replace(/s$/,"")},u:function(C){return void 0===C}},Mt="en",Dt={};Dt[Mt]=wt;var Nt="$isDayjsObject",M=function(C){return C instanceof Et||!(!C||!C[Nt])},xt=function t(C,A,L){var R;if(!C)return Mt;if("string"==typeof C){var Y=C.toLowerCase();Dt[Y]&&(R=Y),A&&(Dt[Y]=A,R=Y);var j=C.split("-");if(!R&&j.length>1)return t(j[0])}else{var F=C.name;Dt[F]=C,R=F}return!L&&R&&(Mt=R),R||!L&&Mt},N=function(C,A){if(M(C))return C.clone();var L="object"==typeof A?A:{};return L.date=C,L.args=arguments,new Et(L)},Ot=yt;Ot.l=xt,Ot.i=M,Ot.w=function(C,A){return N(C,{locale:A.$L,utc:A.$u,x:A.$x,$offset:A.$offset})};var Et=function(){function g(C){this.$L=xt(C.locale,null,!0),this.parse(C),this.$x=this.$x||C.x||{},this[Nt]=!0}var wt=g.prototype;return wt.parse=function(C){this.$d=function(C){var A=C.date,L=C.utc;if(null===A)return new Date(NaN);if(Ot.u(A))return new Date;if(A instanceof Date)return new Date(A);if("string"==typeof A&&!/Z$/i.test(A)){var R=A.match(vt);if(R){var Y=R[2]-1||0,j=(R[7]||"0").substring(0,3);return L?new Date(Date.UTC(R[1],Y,R[3]||1,R[4]||0,R[5]||0,R[6]||0,j)):new Date(R[1],Y,R[3]||1,R[4]||0,R[5]||0,R[6]||0,j)}}return new Date(A)}(C),this.init()},wt.init=function(){var C=this.$d;this.$y=C.getFullYear(),this.$M=C.getMonth(),this.$D=C.getDate(),this.$W=C.getDay(),this.$H=C.getHours(),this.$m=C.getMinutes(),this.$s=C.getSeconds(),this.$ms=C.getMilliseconds()},wt.$utils=function(){return Ot},wt.isValid=function(){return!(this.$d.toString()===mt)},wt.isSame=function(C,A){var L=N(C);return this.startOf(A)<=L&&L<=this.endOf(A)},wt.isAfter=function(C,A){return N(C)<this.startOf(A)},wt.isBefore=function(C,A){return this.endOf(A)<N(C)},wt.$g=function(C,A,L){return Ot.u(C)?this[A]:this.set(L,C)},wt.unix=function(){return Math.floor(this.valueOf()/1e3)},wt.valueOf=function(){return this.$d.getTime()},wt.startOf=function(C,A){var L=this,R=!!Ot.u(A)||A,Q=Ot.p(C),p=function(C,A){var Y=Ot.w(L.$u?Date.UTC(L.$y,A,C):new Date(L.$y,A,C),L);return R?Y:Y.endOf(U)},f=function(C,A){return Ot.w(L.toDate()[C].apply(L.toDate("s"),(R?[0,0,0,0]:[23,59,59,999]).slice(A)),L)},mt=this.$W,vt=this.$M,_t=this.$D,wt="set"+(this.$u?"UTC":"");switch(Q){case st:return R?p(1,0):p(31,11);case W:return R?p(1,vt):p(0,vt+1);case J:var yt=this.$locale().weekStart||0,Mt=(mt<yt?mt+7:mt)-yt;return p(R?_t-Mt:_t+(6-Mt),vt);case U:case ut:return f(wt+"Hours",0);case F:return f(wt+"Minutes",1);case j:return f(wt+"Seconds",2);case Y:return f(wt+"Milliseconds",3);default:return this.clone()}},wt.endOf=function(C){return this.startOf(C,!1)},wt.$set=function(C,A){var L,J=Ot.p(C),Q="set"+(this.$u?"UTC":""),mt=(L={},L[U]=Q+"Date",L[ut]=Q+"Date",L[W]=Q+"Month",L[st]=Q+"FullYear",L[F]=Q+"Hours",L[j]=Q+"Minutes",L[Y]=Q+"Seconds",L[R]=Q+"Milliseconds",L)[J],vt=J===U?this.$D+(A-this.$W):A;if(J===W||J===st){var _t=this.clone().set(ut,1);_t.$d[mt](vt),_t.init(),this.$d=_t.set(ut,Math.min(this.$D,_t.daysInMonth())).$d}else mt&&this.$d[mt](vt);return this.init(),this},wt.set=function(C,A){return this.clone().$set(C,A)},wt.get=function(C){return this[Ot.p(C)]()},wt.add=function(R,Q){var ut,mt=this;R=Number(R);var vt=Ot.p(Q),m=function(C){var A=N(mt);return Ot.w(A.date(A.date()+Math.round(C*R)),mt)};if(vt===W)return this.set(W,this.$M+R);if(vt===st)return this.set(st,this.$y+R);if(vt===U)return m(1);if(vt===J)return m(7);var _t=(ut={},ut[j]=A,ut[F]=L,ut[Y]=C,ut)[vt]||1,wt=this.$d.getTime()+R*_t;return Ot.w(wt,this)},wt.subtract=function(C,A){return this.add(-1*C,A)},wt.format=function(C){var A=this,L=this.$locale();if(!this.isValid())return L.invalidDate||mt;var R=C||"YYYY-MM-DDTHH:mm:ssZ",Y=Ot.z(this),j=this.$H,F=this.$m,U=this.$M,J=L.weekdays,W=L.months,Q=L.meridiem,h=function(C,L,Y,j){return C&&(C[L]||C(A,R))||Y[L].slice(0,j)},u=function(C){return Ot.s(j%12||12,C,"0")},st=Q||function(C,A,L){var R=C<12?"AM":"PM";return L?R.toLowerCase():R};return R.replace(_t,(function(C,R){return R||function(C){switch(C){case"YY":return String(A.$y).slice(-2);case"YYYY":return Ot.s(A.$y,4,"0");case"M":return U+1;case"MM":return Ot.s(U+1,2,"0");case"MMM":return h(L.monthsShort,U,W,3);case"MMMM":return h(W,U);case"D":return A.$D;case"DD":return Ot.s(A.$D,2,"0");case"d":return String(A.$W);case"dd":return h(L.weekdaysMin,A.$W,J,2);case"ddd":return h(L.weekdaysShort,A.$W,J,3);case"dddd":return J[A.$W];case"H":return String(j);case"HH":return Ot.s(j,2,"0");case"h":return u(1);case"hh":return u(2);case"a":return st(j,F,!0);case"A":return st(j,F,!1);case"m":return String(F);case"mm":return Ot.s(F,2,"0");case"s":return String(A.$s);case"ss":return Ot.s(A.$s,2,"0");case"SSS":return Ot.s(A.$ms,3,"0");case"Z":return Y}return null}(C)||Y.replace(":","")}))},wt.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},wt.diff=function(R,ut,mt){var vt,_t=this,wt=Ot.p(ut),yt=N(R),Mt=(yt.utcOffset()-this.utcOffset())*A,Dt=this-yt,w=function(){return Ot.m(_t,yt)};switch(wt){case st:vt=w()/12;break;case W:vt=w();break;case Q:vt=w()/3;break;case J:vt=(Dt-Mt)/6048e5;break;case U:vt=(Dt-Mt)/864e5;break;case F:vt=Dt/L;break;case j:vt=Dt/A;break;case Y:vt=Dt/C;break;default:vt=Dt}return mt?vt:Ot.a(vt)},wt.daysInMonth=function(){return this.endOf(W).$D},wt.$locale=function(){return Dt[this.$L]},wt.locale=function(C,A){if(!C)return this.$L;var L=this.clone(),R=xt(C,A,!0);return R&&(L.$L=R),L},wt.clone=function(){return Ot.w(this.$d,this)},wt.toDate=function(){return new Date(this.valueOf())},wt.toJSON=function(){return this.isValid()?this.toISOString():null},wt.toISOString=function(){return this.$d.toISOString()},wt.toString=function(){return this.$d.toUTCString()},g}(),Vt=Et.prototype;return N.prototype=Vt,[["$ms",R],["$s",Y],["$m",j],["$H",F],["$W",U],["$M",W],["$y",st],["$D",ut]].forEach((function(C){Vt[C[1]]=function(A){return this.$g(A,C[0],C[1])}})),N.extend=function(C,A){return C.$i||(C(A,Et,N),C.$i=!0),N},N.locale=xt,N.isDayjs=M,N.unix=function(C){return N(1e3*C)},N.en=Dt[Mt],N.Ls=Dt,N.p={},N}()),Q={exports:{}},st=z(Q.exports=function(){var C={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},A=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,L=/\d\d/,R=/\d\d?/,Y=/\d*[^-_:/,()\s\d]+/,j={},o=function(C){return(C=+C)+(C>68?1900:2e3)},r=function(C){return function(A){this[C]=+A}},F=[/[+-]\d\d:?(\d\d)?|Z/,function(C){(this.zone||(this.zone={})).offset=function(C){if(!C)return 0;if("Z"===C)return 0;var A=C.match(/([+-]|\d\d)/g),L=60*A[1]+(+A[2]||0);return 0===L?0:"+"===A[0]?-L:L}(C)}],d=function(C){var A=j[C];return A&&(A.indexOf?A:A.s.concat(A.f))},c=function(C,A){var L,R=j.meridiem;if(R){for(var Y=1;Y<=24;Y+=1)if(C.indexOf(R(Y,0,A))>-1){L=Y>12;break}}else L=C===(A?"pm":"PM");return L},U={A:[Y,function(C){this.afternoon=c(C,!1)}],a:[Y,function(C){this.afternoon=c(C,!0)}],S:[/\d/,function(C){this.milliseconds=100*+C}],SS:[L,function(C){this.milliseconds=10*+C}],SSS:[/\d{3}/,function(C){this.milliseconds=+C}],s:[R,r("seconds")],ss:[R,r("seconds")],m:[R,r("minutes")],mm:[R,r("minutes")],H:[R,r("hours")],h:[R,r("hours")],HH:[R,r("hours")],hh:[R,r("hours")],D:[R,r("day")],DD:[L,r("day")],Do:[Y,function(C){var A=j.ordinal,L=C.match(/\d+/);if(this.day=L[0],A)for(var R=1;R<=31;R+=1)A(R).replace(/\[|\]/g,"")===C&&(this.day=R)}],M:[R,r("month")],MM:[L,r("month")],MMM:[Y,function(C){var A=d("months"),L=(d("monthsShort")||A.map((function(C){return C.slice(0,3)}))).indexOf(C)+1;if(L<1)throw new Error;this.month=L%12||L}],MMMM:[Y,function(C){var A=d("months").indexOf(C)+1;if(A<1)throw new Error;this.month=A%12||A}],Y:[/[+-]?\d+/,r("year")],YY:[L,function(C){this.year=o(C)}],YYYY:[/\d{4}/,r("year")],Z:F,ZZ:F};function u(L){var R,Y;R=L,Y=j&&j.formats;for(var F=(L=R.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(A,L,R){var j=R&&R.toUpperCase();return L||Y[R]||C[R]||Y[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(C,A,L){return A||L.slice(1)}))}))).match(A),J=F.length,W=0;W<J;W+=1){var Q=F[W],st=U[Q],ut=st&&st[0],mt=st&&st[1];F[W]=mt?{regex:ut,parser:mt}:Q.replace(/^\[|\]$/g,"")}return function(C){for(var A={},L=0,R=0;L<J;L+=1){var Y=F[L];if("string"==typeof Y)R+=Y.length;else{var j=Y.regex,U=Y.parser,W=C.slice(R),Q=j.exec(W)[0];U.call(A,Q),C=C.replace(Q,"")}}return function(C){var A=C.afternoon;if(void 0!==A){var L=C.hours;A?L<12&&(C.hours+=12):12===L&&(C.hours=0),delete C.afternoon}}(A),A}}return function(C,A,L){L.p.customParseFormat=!0,C&&C.parseTwoDigitYear&&(o=C.parseTwoDigitYear);var R=A.prototype,Y=R.parse;R.parse=function(C){var A=C.date,R=C.utc,F=C.args;this.$u=R;var U=F[1];if("string"==typeof U){var J=!0===F[2],W=!0===F[3],Q=J||W,st=F[2];W&&(st=F[2]),j=this.$locale(),!J&&st&&(j=L.Ls[st]),this.$d=function(C,A,L){try{if(["x","X"].indexOf(A)>-1)return new Date(("X"===A?1e3:1)*C);var R=u(A)(C),Y=R.year,j=R.month,F=R.day,U=R.hours,J=R.minutes,W=R.seconds,Q=R.milliseconds,st=R.zone,ut=new Date,mt=F||(Y||j?1:ut.getDate()),vt=Y||ut.getFullYear(),_t=0;Y&&!j||(_t=j>0?j-1:ut.getMonth());var wt=U||0,yt=J||0,Mt=W||0,Dt=Q||0;return st?new Date(Date.UTC(vt,_t,mt,wt,yt,Mt,Dt+60*st.offset*1e3)):L?new Date(Date.UTC(vt,_t,mt,wt,yt,Mt,Dt)):new Date(vt,_t,mt,wt,yt,Mt,Dt)}catch(C){return new Date("")}}(A,U,R),this.init(),st&&!0!==st&&(this.$L=this.locale(st).$L),Q&&A!=this.format(U)&&(this.$d=new Date("")),j={}}else if(U instanceof Array)for(var ut=U.length,mt=1;mt<=ut;mt+=1){F[1]=U[mt-1];var vt=L.apply(this,F);if(vt.isValid()){this.$d=vt.$d,this.$L=vt.$L,this.init();break}mt===ut&&(this.$d=new Date(""))}else Y.call(this,C)}}}());W.extend(st);const X=(C,A)=>{let L;if(A)switch(A){case"ISO_8601":L=C;break;case"RFC_2822":L=W(C.slice(5),"DD MMM YYYY HH:mm:ss ZZ").unix();break;case"MYSQL":L=W(C,"YYYY-MM-DD hh:mm:ss").unix();break;case"UNIX":L=W(C).unix();break;default:L=W(C,A,!0).valueOf()}return L},Z=(C,A)=>{if(C?.constructor===Object&&Object.prototype.hasOwnProperty.call(C,"data")&&!Object.keys(C).find((C=>!["text","order","data","attributes"].includes(C))))return C;const L={data:C};switch(A.type){case"string":"string"!=typeof C&&(L.text=String(L.data),L.order=L.text);break;case"date":A.format&&(L.order=X(String(L.data),A.format));break;case"number":L.text=String(L.data),L.data=parseFloat(L.data),L.order=L.data;break;case"html":{const C=Array.isArray(L.data)?{nodeName:"TD",childNodes:L.data}:I(`<td>${String(L.data)}</td>`);L.data=C.childNodes||[];const A=i(C);L.text=A,L.order=A;break}case"boolean":"string"==typeof L.data&&(L.data=L.data.toLowerCase().trim()),L.data=!["false",!1,null,void 0,0].includes(L.data),L.order=L.data?1:0,L.text=String(L.data);break;case"other":L.text="",L.order=0;break;default:L.text=JSON.stringify(L.data)}return L},G=C=>{if(C instanceof Object&&C.constructor===Object&&C.hasOwnProperty("data")&&("string"==typeof C.text||"string"==typeof C.data))return C;const A={data:C};if("string"==typeof C){if(C.length){const L=I(`<th>${C}</th>`);if(L.childNodes&&(1!==L.childNodes.length||"#text"!==L.childNodes[0].nodeName)){A.data=L.childNodes,A.type="html";const C=i(L);A.text=C}}}else[null,void 0].includes(C)?A.text="":A.text=JSON.stringify(C);return A},K=(C,A=void 0,L,R,Y)=>{const j={data:[],headings:[]};if(C.headings)j.headings=C.headings.map((C=>G(C)));else if(A?.tHead)j.headings=Array.from(A.tHead.querySelectorAll("th")).map(((C,A)=>{const j=(C=>{const A=T(C,{valueDiffing:!1});let L;return L=!A.childNodes||1===A.childNodes.length&&"#text"===A.childNodes[0].nodeName?{data:C.innerText,type:"string"}:{data:A.childNodes,type:"html",text:i(A)},L.attributes=A.attributes,L})(C);L[A]||(L[A]={type:R,format:Y,searchable:!0,sortable:!0});const F=L[A];return"false"!==C.dataset.sortable?.trim().toLowerCase()&&"false"!==C.dataset.sort?.trim().toLowerCase()||(F.sortable=!1),"false"===C.dataset.searchable?.trim().toLowerCase()&&(F.searchable=!1),"true"!==C.dataset.hidden?.trim().toLowerCase()&&"true"!==C.getAttribute("hidden")?.trim().toLowerCase()||(F.hidden=!0),["number","string","html","date","boolean","other"].includes(C.dataset.type)&&(F.type=C.dataset.type,"date"===F.type&&C.dataset.format&&(F.format=C.dataset.format)),j}));else if(C.data?.length){const A=C.data[0],L=Array.isArray(A)?A:A.cells;j.headings=L.map((C=>G("")))}else A?.tBodies.length&&(j.headings=Array.from(A.tBodies[0].rows[0].cells).map((C=>G(""))));for(let C=0;C<j.headings.length;C++)L[C]||(L[C]={type:R,format:Y,sortable:!0,searchable:!0});if(C.data){const A=j.headings.map((C=>C.data?String(C.data):C.text));j.data=C.data.map((C=>{let R,Y;return Array.isArray(C)?(R={},Y=C):C.hasOwnProperty("cells")&&Object.keys(C).every((C=>["cells","attributes"].includes(C)))?(R=C.attributes,Y=C.cells):(R={},Y=[],Object.entries(C).forEach((([C,L])=>{const R=A.indexOf(C);R>-1&&(Y[R]=L)}))),{attributes:R,cells:Y.map(((C,A)=>Z(C,L[A])))}}))}else A?.tBodies?.length&&(j.data=Array.from(A.tBodies[0].rows).map((C=>({attributes:r(C.attributes),cells:Array.from(C.cells).map(((C,A)=>{const R=C.dataset.content?Z(C.dataset.content,L[A]):((C,A)=>{let L;switch(A.type){case"string":L={data:C.innerText};break;case"date":{const R=C.innerText;L={data:R,order:X(R,A.format)};break}case"number":{const A=parseFloat(C.innerText);L={data:A,order:A,text:C.innerText};break}case"boolean":{const A=!["false","0","null","undefined"].includes(C.innerText.toLowerCase().trim());L={data:A,text:A?"1":"0",order:A?1:0};break}default:L={data:T(C,{valueDiffing:!1}).childNodes||[],text:C.innerText,order:C.innerText}}return L.attributes=r(C.attributes),L})(C,L[A]);return C.dataset.order&&(R.order=isNaN(parseFloat(C.dataset.order))?C.dataset.order:parseFloat(C.dataset.order)),R}))}))));if(j.data.length&&j.data[0].cells.length!==j.headings.length)throw new Error("Data heading length mismatch.");return j};class tt{cursor;dt;constructor(C){this.dt=C,this.cursor=!1}setCursor(C=!1){if(C===this.cursor)return;const A=this.cursor;if(this.cursor=C,this.dt._renderTable(),!1!==C&&this.dt.options.scrollY){const C=l(this.dt.options.classes.cursor),A=this.dt.dom.querySelector(`tr${C}`);A&&A.scrollIntoView({block:"nearest"})}this.dt.emit("datatable.cursormove",this.cursor,A)}add(C){if(!Array.isArray(C)||C.length<1)return;const A={cells:C.map(((C,A)=>{const L=this.dt.columns.settings[A];return Z(C,L)}))};this.dt.data.data.push(A),this.dt.hasRows=!0,this.dt.update(!0)}remove(C){if(!Array.isArray(C))return this.remove([C]);this.dt.data.data=this.dt.data.data.filter(((A,L)=>!C.includes(L))),this.dt.data.data.length||(this.dt.hasRows=!1),this.dt.update(!0)}findRowIndex(C,A){return this.dt.data.data.findIndex((L=>{const R=L.cells[C];return n(R).toLowerCase().includes(String(A).toLowerCase())}))}findRow(C,A){const L=this.findRowIndex(C,A);if(L<0)return{index:-1,row:null,cols:[]};const R=this.dt.data.data[L],Y=R.cells.map((C=>C.data));return{index:L,row:R,cols:Y}}updateRow(C,A){const L={cells:A.map(((C,A)=>{const L=this.dt.columns.settings[A];return Z(C,L)}))};this.dt.data.data.splice(C,1,L),this.dt.update(!0)}}class et{dt;settings;_state;constructor(C){this.dt=C,this.init()}init(){[this.settings,this._state]=((C=[],A,L)=>{let R=[],Y=!1;const j=[];return C.forEach((C=>{(Array.isArray(C.select)?C.select:[C.select]).forEach((F=>{R[F]?C.type&&(R[F].type=C.type):R[F]={type:C.type||A,sortable:!0,searchable:!0};const U=R[F];C.render&&(U.render=C.render),C.format?U.format=C.format:"date"===C.type&&(U.format=L),C.cellClass&&(U.cellClass=C.cellClass),C.headerClass&&(U.headerClass=C.headerClass),C.locale&&(U.locale=C.locale),!1===C.sortable?U.sortable=!1:(C.numeric&&(U.numeric=C.numeric),C.caseFirst&&(U.caseFirst=C.caseFirst)),!1===C.searchable?U.searchable=!1:C.sensitivity&&(U.sensitivity=C.sensitivity),(U.searchable||U.sortable)&&void 0!==C.ignorePunctuation&&(U.ignorePunctuation=C.ignorePunctuation),C.searchMethod&&(U.searchMethod=C.searchMethod),C.hidden&&(U.hidden=!0),C.filter&&(U.filter=C.filter),C.sortSequence&&(U.sortSequence=C.sortSequence),C.sort&&(C.filter?j[F]=C.sort:Y={column:F,dir:C.sort}),void 0!==C.searchItemSeparator&&(U.searchItemSeparator=C.searchItemSeparator)}))})),R=R.map((C=>C||{type:A,format:"date"===A?L:void 0,sortable:!0,searchable:!0})),[R,{filters:j,sort:Y,widths:[]}]})(this.dt.options.columns,this.dt.options.type,this.dt.options.format)}get(C){return C<0||C>=this.size()?null:{...this.settings[C]}}size(){return this.settings.length}swap(C){if(2===C.length){const A=this.dt.data.headings.map(((C,A)=>A)),L=C[0],R=C[1],Y=A[R];return A[R]=A[L],A[L]=Y,this.order(A)}}order(C){this.dt.data.headings=C.map((C=>this.dt.data.headings[C])),this.dt.data.data.forEach((A=>A.cells=C.map((C=>A.cells[C])))),this.settings=C.map((C=>this.settings[C])),this.dt.update()}hide(C){Array.isArray(C)||(C=[C]),C.length&&(C.forEach((C=>{this.settings[C]||(this.settings[C]={type:"string"});this.settings[C].hidden=!0})),this.dt.update())}show(C){Array.isArray(C)||(C=[C]),C.length&&(C.forEach((C=>{this.settings[C]||(this.settings[C]={type:"string",sortable:!0});delete this.settings[C].hidden})),this.dt.update())}visible(C){return void 0===C&&(C=[...Array(this.dt.data.headings.length).keys()]),Array.isArray(C)?C.map((C=>!this.settings[C]?.hidden)):!this.settings[C]?.hidden}add(C){const A=this.dt.data.headings.length;if(this.dt.data.headings=this.dt.data.headings.concat([G(C.heading)]),this.dt.data.data.forEach(((A,L)=>{A.cells=A.cells.concat([Z(C.data[L],C)])})),this.settings[A]={type:C.type||"string",sortable:!0,searchable:!0},C.type||C.format||C.sortable||C.render||C.filter){const L=this.settings[A];C.render&&(L.render=C.render),C.format&&(L.format=C.format),C.cellClass&&(L.cellClass=C.cellClass),C.headerClass&&(L.headerClass=C.headerClass),C.locale&&(L.locale=C.locale),!1===C.sortable?L.sortable=!1:(C.numeric&&(L.numeric=C.numeric),C.caseFirst&&(L.caseFirst=C.caseFirst)),!1===C.searchable?L.searchable=!1:C.sensitivity&&(L.sensitivity=C.sensitivity),(L.searchable||L.sortable)&&C.ignorePunctuation&&(L.ignorePunctuation=C.ignorePunctuation),C.hidden&&(L.hidden=!0),C.filter&&(L.filter=C.filter),C.sortSequence&&(L.sortSequence=C.sortSequence)}this.dt.update(!0)}remove(C){Array.isArray(C)||(C=[C]),this.dt.data.headings=this.dt.data.headings.filter(((A,L)=>!C.includes(L))),this.dt.data.data.forEach((A=>A.cells=A.cells.filter(((A,L)=>!C.includes(L))))),this.dt.update(!0)}filter(C,A=!1){if(!this.settings[C]?.filter?.length)return;const L=this._state.filters[C];let R;if(L){let A=!1;R=this.settings[C].filter.find((C=>!!A||(C===L&&(A=!0),!1)))}else{const A=this.settings[C].filter;R=A?A[0]:void 0}R?this._state.filters[C]=R:L&&(this._state.filters[C]=void 0),this.dt._currentPage=1,this.dt.update(),A||this.dt.emit("datatable.filter",C,R)}sort(C,A=void 0,L=!1){const R=this.settings[C];if(L||this.dt.emit("datatable.sorting",C,A),!A){const L=!(!this._state.sort||this._state.sort.column!==C)&&this._state.sort?.dir,Y=R?.sortSequence||["asc","desc"];if(L){const C=Y.indexOf(L);A=-1===C?Y[0]||"asc":C===Y.length-1?Y[0]:Y[C+1]}else A=Y.length?Y[0]:"asc"}const Y=!!["string","html"].includes(R.type)&&new Intl.Collator(R.locale||this.dt.options.locale,{usage:"sort",numeric:R.numeric||this.dt.options.numeric,caseFirst:R.caseFirst||this.dt.options.caseFirst,ignorePunctuation:R.ignorePunctuation||this.dt.options.ignorePunctuation});this.dt.data.data.sort(((L,R)=>{const j=L.cells[C],F=R.cells[C];let U=j.order??n(j),J=F.order??n(F);if("desc"===A){const C=U;U=J,J=C}return Y&&"number"!=typeof U&&"number"!=typeof J?Y.compare(String(U),String(J)):U<J?-1:U>J?1:0})),this._state.sort={column:C,dir:A},this.dt._searchQueries.length?(this.dt.multiSearch(this.dt._searchQueries),this.dt.emit("datatable.sort",C,A)):L||(this.dt._currentPage=1,this.dt.update(),this.dt.emit("datatable.sort",C,A))}_measureWidths(){const C=this.dt.data.headings.filter(((C,A)=>!this.settings[A]?.hidden));if((this.dt.options.scrollY.length||this.dt.options.fixedColumns)&&C?.length){this._state.widths=[];const C={noPaging:!0};if(this.dt.options.header||this.dt.options.footer){this.dt.options.scrollY.length&&(C.unhideHeader=!0),this.dt.headerDOM&&this.dt.headerDOM.parentElement.removeChild(this.dt.headerDOM),C.noColumnWidths=!0,this.dt._renderTable(C);const A=Array.from(this.dt.dom.querySelector("thead, tfoot")?.firstElementChild?.querySelectorAll("th")||[]);let L=0;const R=this.dt.data.headings.map(((C,R)=>{if(this.settings[R]?.hidden)return 0;const Y=A[L].offsetWidth;return L+=1,Y})),Y=R.reduce(((C,A)=>C+A),0);this._state.widths=R.map((C=>C/Y*100))}else{C.renderHeader=!0,this.dt._renderTable(C);const A=Array.from(this.dt.dom.querySelector("thead, tfoot")?.firstElementChild?.querySelectorAll("th")||[]);let L=0;const R=this.dt.data.headings.map(((C,R)=>{if(this.settings[R]?.hidden)return 0;const Y=A[L].offsetWidth;return L+=1,Y})),Y=R.reduce(((C,A)=>C+A),0);this._state.widths=R.map((C=>C/Y*100))}this.dt._renderTable()}}}const ut={sortable:!0,locale:"en",numeric:!0,caseFirst:"false",searchable:!0,sensitivity:"base",ignorePunctuation:!0,destroyable:!0,searchItemSeparator:"",searchQuerySeparator:" ",searchAnd:!1,searchMethod:!1,data:{},type:"html",format:"YYYY-MM-DD",columns:[],paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"",nextText:"",firstText:"",lastText:"",ellipsisText:"",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,footer:!1,header:!0,hiddenHeader:!1,caption:void 0,rowNavigation:!1,rowSelectionKeys:["Enter"," "],tabIndex:!1,pagerRender:!1,rowRender:!1,tableRender:!1,diffDomOptions:{valueDiffing:!1},labels:{placeholder:"Search...",searchTitle:"Search within table",perPage:"entries per page",pageTitle:"Page {page}",noRows:"No entries found",noResults:"No results match your search query",info:"Showing {start} to {end} of {rows} entries"},template:(C,A)=>`<div class='${C.classes.top}'>\n    ${C.paging&&C.perPageSelect?`<div class='${C.classes.dropdown}'>\n            <label>\n                <select class='${C.classes.selector}' name="per-page"></select> ${C.labels.perPage}\n            </label>\n        </div>`:""}\n    ${C.searchable?`<div class='${C.classes.search}'>\n            <input class='${C.classes.input}' placeholder='${C.labels.placeholder}' type='search' name="search" title='${C.labels.searchTitle}'${A.id?` aria-controls="${A.id}"`:""}>\n        </div>`:""}\n</div>\n<div class='${C.classes.container}'${C.scrollY.length?` style='height: ${C.scrollY}; overflow-Y: auto;'`:""}></div>\n<div class='${C.classes.bottom}'>\n    ${C.paging?`<div class='${C.classes.info}'></div>`:""}\n    <nav class='${C.classes.pagination}'></nav>\n</div>`,classes:{active:"datatable-active",ascending:"datatable-ascending",bottom:"datatable-bottom",container:"datatable-container",cursor:"datatable-cursor",descending:"datatable-descending",disabled:"datatable-disabled",dropdown:"datatable-dropdown",ellipsis:"datatable-ellipsis",filter:"datatable-filter",filterActive:"datatable-filter-active",empty:"datatable-empty",headercontainer:"datatable-headercontainer",hidden:"datatable-hidden",info:"datatable-info",input:"datatable-input",loading:"datatable-loading",pagination:"datatable-pagination",paginationList:"datatable-pagination-list",paginationListItem:"datatable-pagination-list-item",paginationListItemLink:"datatable-pagination-list-item-link",search:"datatable-search",selector:"datatable-selector",sorter:"datatable-sorter",table:"datatable-table",top:"datatable-top",wrapper:"datatable-wrapper"}},it=(C,A,L,R={})=>({nodeName:"LI",attributes:{class:R.active&&!R.hidden?`${L.classes.paginationListItem} ${L.classes.active}`:R.hidden?`${L.classes.paginationListItem} ${L.classes.hidden} ${L.classes.disabled}`:L.classes.paginationListItem},childNodes:[{nodeName:"BUTTON",attributes:{"data-page":String(C),class:L.classes.paginationListItemLink,"aria-label":L.labels.pageTitle.replace("{page}",String(C))},childNodes:[{nodeName:"#text",data:A}]}]}),nt=(C,A,L,R,Y)=>{let j=[];if(Y.firstLast&&j.push(it(1,Y.firstText,Y)),Y.nextPrev){const A=C?1:L-1;j.push(it(A,Y.prevText,Y,{hidden:C}))}let F=[...Array(R).keys()].map((C=>it(C+1,String(C+1),Y,{active:C===L-1})));if(Y.truncatePager&&(F=((C,A,L,R)=>{const Y=R.pagerDelta,j=R.classes,F=R.ellipsisText,U=2*Y;let J=A-Y,W=A+Y;A<4-Y+U?W=3+U:A>L-(3-Y+U)&&(J=L-(2+U));const Q=[];for(let A=1;A<=L;A++)if(1==A||A==L||A>=J&&A<=W){const L=C[A-1];Q.push(L)}let st;const ut=[];return Q.forEach((A=>{const L=parseInt(A.childNodes[0].attributes["data-page"],10);if(st){const A=parseInt(st.childNodes[0].attributes["data-page"],10);if(L-A==2)ut.push(C[A]);else if(L-A!=1){const C={nodeName:"LI",attributes:{class:`${j.paginationListItem} ${j.ellipsis} ${j.disabled}`},childNodes:[{nodeName:"BUTTON",attributes:{class:j.paginationListItemLink},childNodes:[{nodeName:"#text",data:F}]}]};ut.push(C)}}ut.push(A),st=A})),ut})(F,L,R,Y)),j=j.concat(F),Y.nextPrev){const C=A?R:L+1;j.push(it(C,Y.nextText,Y,{hidden:A}))}Y.firstLast&&j.push(it(R,Y.lastText,Y));return{nodeName:"UL",attributes:{class:Y.classes.paginationList},childNodes:F.length>1?j:[]}};class at{columns;containerDOM;_currentPage;data;_dd;dom;_events;hasHeadings;hasRows;headerDOM;_initialHTML;initialized;_label;lastPage;_listeners;onFirstPage;onLastPage;options;_pagerDOMs;_virtualPagerDOM;pages;_rect;rows;_searchData;_searchQueries;_tableAttributes;_tableFooters;_tableCaptions;totalPages;_virtualDOM;_virtualHeaderDOM;wrapperDOM;constructor(C,A={}){const L="string"==typeof C?document.querySelector(C):C;L instanceof HTMLTableElement?this.dom=L:(this.dom=document.createElement("table"),L.appendChild(this.dom));const R={...ut.diffDomOptions,...A.diffDomOptions},Y={...ut.labels,...A.labels},j={...ut.classes,...A.classes};this.options={...ut,...A,diffDomOptions:R,labels:Y,classes:j},this._initialHTML=this.options.destroyable?L.outerHTML:"",this.options.tabIndex?this.dom.tabIndex=this.options.tabIndex:this.options.rowNavigation&&-1===this.dom.tabIndex&&(this.dom.tabIndex=0),this._listeners={onResize:()=>this._onResize()},this._dd=new U(this.options.diffDomOptions||{}),this.initialized=!1,this._events={},this._currentPage=0,this.onFirstPage=!0,this.hasHeadings=!1,this.hasRows=!1,this._searchQueries=[],this.init()}init(){if(this.initialized||d(this.dom,this.options.classes.table))return!1;this._virtualDOM=T(this.dom,this.options.diffDomOptions||{}),this._tableAttributes={...this._virtualDOM.attributes},this._tableFooters=this._virtualDOM.childNodes?.filter((C=>"TFOOT"===C.nodeName))??[],this._tableCaptions=this._virtualDOM.childNodes?.filter((C=>"CAPTION"===C.nodeName))??[],void 0!==this.options.caption&&this._tableCaptions.push({nodeName:"CAPTION",childNodes:[{nodeName:"#text",data:this.options.caption}]}),this.rows=new tt(this),this.columns=new et(this),this.data=K(this.options.data,this.dom,this.columns.settings,this.options.type,this.options.format),this._render(),setTimeout((()=>{this.emit("datatable.init"),this.initialized=!0}),10)}_render(){this.wrapperDOM=s("div",{class:`${this.options.classes.wrapper} ${this.options.classes.loading}`}),this.wrapperDOM.innerHTML=this.options.template(this.options,this.dom);const C=l(this.options.classes.selector),A=this.wrapperDOM.querySelector(`select${C}`);A&&this.options.paging&&this.options.perPageSelect?this.options.perPageSelect.forEach((C=>{const[L,R]=Array.isArray(C)?[C[0],C[1]]:[String(C),C],Y=R===this.options.perPage,j=new Option(L,String(R),Y,Y);A.appendChild(j)})):A&&A.parentElement.removeChild(A);const L=l(this.options.classes.container);this.containerDOM=this.wrapperDOM.querySelector(L),this._pagerDOMs=[];const R=l(this.options.classes.pagination);Array.from(this.wrapperDOM.querySelectorAll(R)).forEach((C=>{C instanceof HTMLElement&&(C.innerHTML=`<ul class="${this.options.classes.paginationList}"></ul>`,this._pagerDOMs.push(C.firstElementChild))})),this._virtualPagerDOM={nodeName:"UL",attributes:{class:this.options.classes.paginationList}};const Y=l(this.options.classes.info);this._label=this.wrapperDOM.querySelector(Y),this.dom.parentElement.replaceChild(this.wrapperDOM,this.dom),this.containerDOM.appendChild(this.dom),this._rect=this.dom.getBoundingClientRect(),this._fixHeight(),this.options.header||this.wrapperDOM.classList.add("no-header"),this.options.footer||this.wrapperDOM.classList.add("no-footer"),this.options.sortable&&this.wrapperDOM.classList.add("sortable"),this.options.searchable&&this.wrapperDOM.classList.add("searchable"),this.options.fixedHeight&&this.wrapperDOM.classList.add("fixed-height"),this.options.fixedColumns&&this.wrapperDOM.classList.add("fixed-columns"),this._bindEvents(),this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}_renderTable(C={}){let A;A=(this.options.paging||this._searchQueries.length||this.columns._state.filters.length)&&this._currentPage&&this.pages.length&&!C.noPaging?this.pages[this._currentPage-1]:this.data.data.map(((C,A)=>({row:C,index:A})));let L=B(this._tableAttributes,this.data.headings,A,this.columns.settings,this.columns._state,this.rows.cursor,this.options,C,this._tableFooters,this._tableCaptions);if(this.options.tableRender){const C=this.options.tableRender(this.data,L,"main");C&&(L=C)}const R=this._dd.diff(this._virtualDOM,L);this._dd.apply(this.dom,R),this._virtualDOM=L}_renderPage(C=!1){this.hasRows&&this.totalPages?(this._currentPage>this.totalPages&&(this._currentPage=1),this._renderTable(),this.onFirstPage=1===this._currentPage,this.onLastPage=this._currentPage===this.lastPage):this.setMessage(this.options.labels.noRows);let A,L=0,R=0,Y=0;if(this.totalPages&&(L=this._currentPage-1,R=L*this.options.perPage,Y=R+this.pages[L].length,R+=1,A=this._searchQueries.length?this._searchData.length:this.data.data.length),this._label&&this.options.labels.info.length){const C=this.options.labels.info.replace("{start}",String(R)).replace("{end}",String(Y)).replace("{page}",String(this._currentPage)).replace("{pages}",String(this.totalPages)).replace("{rows}",String(A));this._label.innerHTML=A?C:""}if(1==this._currentPage&&this._fixHeight(),this.options.rowNavigation&&this._currentPage&&(!this.rows.cursor||!this.pages[this._currentPage-1].find((C=>C.index===this.rows.cursor)))){const A=this.pages[this._currentPage-1];A.length&&(C?this.rows.setCursor(A[A.length-1].index):this.rows.setCursor(A[0].index))}}_renderPagers(){if(!this.options.paging)return;let C=nt(this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages,this.options);if(this.options.pagerRender){const A=this.options.pagerRender([this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages],C);A&&(C=A)}const A=this._dd.diff(this._virtualPagerDOM,C);this._pagerDOMs.forEach((C=>{this._dd.apply(C,A)})),this._virtualPagerDOM=C}_renderSeparateHeader(){const C=this.dom.parentElement;this.headerDOM||(this.headerDOM=document.createElement("div"),this._virtualHeaderDOM={nodeName:"DIV"}),C.parentElement.insertBefore(this.headerDOM,C);let A={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[q(this.data.headings,this.columns.settings,this.columns._state,this.options,{unhideHeader:!0})]}]};if(A.attributes.class=c(A.attributes.class,this.options.classes.table),this.options.tableRender){const C=this.options.tableRender(this.data,A,"header");C&&(A=C)}const L={nodeName:"DIV",attributes:{class:this.options.classes.headercontainer},childNodes:[A]},R=this._dd.diff(this._virtualHeaderDOM,L);this._dd.apply(this.headerDOM,R),this._virtualHeaderDOM=L;const Y=this.headerDOM.firstElementChild.clientWidth-this.dom.clientWidth;if(Y){const C=structuredClone(this._virtualHeaderDOM);C.attributes.style=`padding-right: ${Y}px;`;const A=this._dd.diff(this._virtualHeaderDOM,C);this._dd.apply(this.headerDOM,A),this._virtualHeaderDOM=C}C.scrollHeight>C.clientHeight&&(C.style.overflowY="scroll")}_bindEvents(){if(this.options.perPageSelect){const C=l(this.options.classes.selector),A=this.wrapperDOM.querySelector(C);A&&A instanceof HTMLSelectElement&&A.addEventListener("change",(()=>{this.emit("datatable.perpage:before",this.options.perPage),this.options.perPage=parseInt(A.value,10),this.update(),this._fixHeight(),this.emit("datatable.perpage",this.options.perPage)}),!1)}this.options.searchable&&this.wrapperDOM.addEventListener("input",(C=>{const A=l(this.options.classes.input),L=C.target;if(!(L instanceof HTMLInputElement&&L.matches(A)))return;C.preventDefault();const R=[];if(Array.from(this.wrapperDOM.querySelectorAll(A)).filter((C=>C.value.length)).forEach((C=>{const A=C.dataset.and||this.options.searchAnd,L=C.dataset.querySeparator||this.options.searchQuerySeparator?C.value.split(this.options.searchQuerySeparator):[C.value];A?L.forEach((A=>{C.dataset.columns?R.push({terms:[A],columns:JSON.parse(C.dataset.columns)}):R.push({terms:[A],columns:void 0})})):C.dataset.columns?R.push({terms:L,columns:JSON.parse(C.dataset.columns)}):R.push({terms:L,columns:void 0})})),1===R.length&&1===R[0].terms.length){const C=R[0];this.search(C.terms[0],C.columns)}else this.multiSearch(R)})),this.wrapperDOM.addEventListener("click",(C=>{const A=C.target.closest("a, button");if(A)if(A.hasAttribute("data-page"))this.page(parseInt(A.getAttribute("data-page"),10)),C.preventDefault();else if(d(A,this.options.classes.sorter)){const L=Array.from(A.parentElement.parentElement.children).indexOf(A.parentElement),R=o(L,this.columns.settings);this.columns.sort(R),C.preventDefault()}else if(d(A,this.options.classes.filter)){const L=Array.from(A.parentElement.parentElement.children).indexOf(A.parentElement),R=o(L,this.columns.settings);this.columns.filter(R),C.preventDefault()}}),!1),this.options.rowNavigation&&this.dom.addEventListener("keydown",(C=>{if("ArrowUp"===C.key){let A;C.preventDefault(),C.stopPropagation(),this.pages[this._currentPage-1].find((C=>C.index===this.rows.cursor||(A=C,!1))),A?this.rows.setCursor(A.index):this.onFirstPage||this.page(this._currentPage-1,!0)}else if("ArrowDown"===C.key){let A;C.preventDefault(),C.stopPropagation();const L=this.pages[this._currentPage-1].find((C=>!!A||(C.index===this.rows.cursor&&(A=!0),!1)));L?this.rows.setCursor(L.index):this.onLastPage||this.page(this._currentPage+1)}else this.options.rowSelectionKeys.includes(C.key)&&this.emit("datatable.selectrow",this.rows.cursor,C,!0)})),this.dom.addEventListener("mousedown",(C=>{const A=C.target;if(!(A instanceof Element))return;const L=Array.from(this.dom.querySelectorAll("tbody > tr")).find((C=>C.contains(A)));L&&L instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(L.dataset.index,10),C,this.dom.matches(":focus"))})),window.addEventListener("resize",this._listeners.onResize)}_onResize=h((()=>{this._rect=this.containerDOM.getBoundingClientRect(),this._rect.width&&this.update(!0)}),250);destroy(){if(this.options.destroyable){if(this.wrapperDOM){const C=this.wrapperDOM.parentElement;if(C){const A=s("div");A.innerHTML=this._initialHTML;const L=A.firstElementChild;C.replaceChild(L,this.wrapperDOM),this.dom=L}else this.options.classes.table?.split(" ").forEach((C=>this.wrapperDOM.classList.remove(C)))}window.removeEventListener("resize",this._listeners.onResize),this.initialized=!1}}update(C=!1){this.emit("datatable.update:before"),C&&(this.columns._measureWidths(),this.hasRows=Boolean(this.data.data.length),this.hasHeadings=Boolean(this.data.headings.length)),this.options.classes.empty?.split(" ").forEach((C=>this.wrapperDOM.classList.remove(C))),this._paginate(),this._renderPage(),this._renderPagers(),this.options.scrollY.length&&this._renderSeparateHeader(),this.emit("datatable.update")}_paginate(){let C=this.data.data.map(((C,A)=>({row:C,index:A})));return this._searchQueries.length&&(C=[],this._searchData.forEach((A=>C.push({index:A,row:this.data.data[A]})))),this.columns._state.filters.length&&this.columns._state.filters.forEach(((A,L)=>{A&&(C=C.filter((C=>{const R=C.row.cells[L];return"function"==typeof A?A(R.data):n(R)===A})))})),this.options.paging&&this.options.perPage>0?this.pages=C.map(((A,L)=>L%this.options.perPage==0?C.slice(L,L+this.options.perPage):null)).filter((C=>C)):this.pages=[C],this.totalPages=this.lastPage=this.pages.length,this._currentPage||(this._currentPage=1),this.totalPages}_fixHeight(){this.options.fixedHeight&&(this.containerDOM.style.height=null,this._rect=this.containerDOM.getBoundingClientRect(),this.containerDOM.style.height=`${this._rect.height}px`)}search(C,A=void 0,L="search"){if(this.emit("datatable.search:before",C,this._searchData),!C.length)return this._currentPage=1,this._searchQueries=[],this._searchData=[],this.update(),this.emit("datatable.search","",[]),this.wrapperDOM.classList.remove("search-results"),!1;this.multiSearch([{terms:[C],columns:A||void 0}],L),this.emit("datatable.search",C,this._searchData)}multiSearch(C,A="search"){if(!this.hasRows)return!1;this._currentPage=1,this._searchData=[];let L=C.map((C=>({columns:C.columns,terms:C.terms.map((C=>C.trim())).filter((C=>C)),source:A}))).filter((C=>C.terms.length));if(this.emit("datatable.multisearch:before",L,this._searchData),A.length&&(L=L.concat(this._searchQueries.filter((C=>C.source!==A)))),this._searchQueries=L,!L.length)return this.update(),this.emit("datatable.multisearch",L,this._searchData),this.wrapperDOM.classList.remove("search-results"),!1;const R=L.map((C=>this.columns.settings.map(((A,L)=>{if(A.hidden||!A.searchable||C.columns&&!C.columns.includes(L))return!1;let R=C.terms;const Y=A.sensitivity||this.options.sensitivity;["base","accent"].includes(Y)&&(R=R.map((C=>C.toLowerCase()))),["base","case"].includes(Y)&&(R=R.map((C=>C.normalize("NFD").replace(/\p{Diacritic}/gu,""))));return(A.ignorePunctuation??this.options.ignorePunctuation)&&(R=R.map((C=>C.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,"")))),R}))));this.data.data.forEach(((C,A)=>{const Y=C.cells.map(((C,A)=>{const L=this.columns.settings[A];if(L.searchMethod||this.options.searchMethod)return C;let R=n(C).trim();if(R.length){const C=L.sensitivity||this.options.sensitivity;["base","accent"].includes(C)&&(R=R.toLowerCase()),["base","case"].includes(C)&&(R=R.normalize("NFD").replace(/\p{Diacritic}/gu,""));(L.ignorePunctuation??this.options.ignorePunctuation)&&(R=R.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,""))}const Y=L.searchItemSeparator||this.options.searchItemSeparator;return Y?R.split(Y):[R]}));R.every(((A,R)=>A.find(((A,j)=>{if(!A)return!1;const F=this.columns.settings[j].searchMethod||this.options.searchMethod;return F?F(A,Y[j],C,j,L[R].source):A.find((C=>Y[j].find((A=>A.includes(C)))))}))))&&this._searchData.push(A)})),this.wrapperDOM.classList.add("search-results"),this._searchData.length?this.update():(this.wrapperDOM.classList.remove("search-results"),this.setMessage(this.options.labels.noResults)),this.emit("datatable.multisearch",L,this._searchData)}page(C,A=!1){return this.emit("datatable.page:before",C),C!==this._currentPage&&(isNaN(C)||(this._currentPage=C),!(C>this.pages.length||C<0)&&(this._renderPage(A),this._renderPagers(),void this.emit("datatable.page",C)))}insert(C){let A=[];if(Array.isArray(C)){const L=this.data.headings.map((C=>C.data?String(C.data):C.text));C.forEach(((C,R)=>{const Y=[];Object.entries(C).forEach((([C,A])=>{const j=L.indexOf(C);j>-1?Y[j]=Z(A,this.columns.settings[j]):this.hasHeadings||this.hasRows||0!==R||(Y[L.length]=Z(A,this.columns.settings[L.length]),L.push(C),this.data.headings.push(G(C)))})),A.push({cells:Y})}))}else t(C)&&(!C.headings||this.hasHeadings||this.hasRows?C.data&&Array.isArray(C.data)&&(A=C.data.map((C=>{let A,L;return Array.isArray(C)?(A={},L=C):(A=C.attributes,L=C.cells),{attributes:A,cells:L.map(((C,A)=>Z(C,this.columns.settings[A])))}}))):this.data=K(C,void 0,this.columns.settings,this.options.type,this.options.format));A.length&&A.forEach((C=>this.data.data.push(C))),this.hasHeadings=Boolean(this.data.headings.length),this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}refresh(){if(this.emit("datatable.refresh:before"),this.options.searchable){const C=l(this.options.classes.input);Array.from(this.wrapperDOM.querySelectorAll(C)).forEach((C=>C.value="")),this._searchQueries=[]}this._currentPage=1,this.onFirstPage=!0,this.update(!0),this.emit("datatable.refresh")}print(){const C=s("table");let A=B(this._tableAttributes,this.data.headings,this.data.data.map(((C,A)=>({row:C,index:A}))),this.columns.settings,this.columns._state,!1,this.options,{noColumnWidths:!0,unhideHeader:!0},this._tableFooters,this._tableCaptions);if(this.options.tableRender){const C=this.options.tableRender(this.data,A,"print");C&&(A=C)}const L=this._dd.diff({nodeName:"TABLE"},A);this._dd.apply(C,L);const R=window.open();R.document.body.appendChild(C),R.print()}setMessage(C){const A=this.data.headings.filter(((C,A)=>!this.columns.settings[A]?.hidden)).length||1;this.options.classes.empty?.split(" ").forEach((C=>this.wrapperDOM.classList.add(C))),this._label&&(this._label.innerHTML=""),this.totalPages=0,this._renderPagers();let L={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[q(this.data.headings,this.columns.settings,this.columns._state,this.options,{})]},{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",attributes:{class:this.options.classes.empty,colspan:String(A)},childNodes:[{nodeName:"#text",data:C}]}]}]}]};if(this._tableFooters.forEach((C=>L.childNodes.push(C))),this._tableCaptions.forEach((C=>L.childNodes.push(C))),L.attributes.class=c(L.attributes.class,this.options.classes.table),this.options.tableRender){const C=this.options.tableRender(this.data,L,"message");C&&(L=C)}const R=this._dd.diff(this._virtualDOM,L);this._dd.apply(this.dom,R),this._virtualDOM=L}on(C,A){this._events[C]=this._events[C]||[],this._events[C].push(A)}off(C,A){C in this._events!=!1&&this._events[C].splice(this._events[C].indexOf(A),1)}emit(C,...A){if(C in this._events!=!1)for(let L=0;L<this._events[C].length;L++)this._events[C][L](...A)}}const ot=function(C){let A;if(!t(C))return!1;const L={lineDelimiter:"\n",columnDelimiter:",",removeDoubleQuotes:!1,...C};if(L.data.length){A={data:[]};const C=L.data.split(L.lineDelimiter);if(C.length&&(L.headings&&(A.headings=C[0].split(L.columnDelimiter),L.removeDoubleQuotes&&(A.headings=A.headings.map((C=>C.trim().replace(/(^"|"$)/g,"")))),C.shift()),C.forEach(((C,R)=>{A.data[R]=[];const Y=C.split(L.columnDelimiter);Y.length&&Y.forEach((C=>{L.removeDoubleQuotes&&(C=C.trim().replace(/(^"|"$)/g,"")),A.data[R].push(C)}))}))),A)return A}return!1},rt=function(C){let A;if(!t(C))return!1;const L={data:"",...C};if(L.data.length||t(L.data)){const C=!!e(L.data)&&JSON.parse(L.data);if(C?(A={headings:[],data:[]},C.forEach(((C,L)=>{A.data[L]=[],Object.entries(C).forEach((([C,R])=>{A.headings.includes(C)||A.headings.push(C),A.data[L].push(R)}))}))):console.warn("That's not valid JSON!"),A)return A}return!1},lt=function(C,A={}){if(!C.hasHeadings&&!C.hasRows)return!1;if(!t(A))return!1;const L={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",...A},a=A=>!L.skipColumn.includes(A)&&!C.columns.settings[A]?.hidden,R=C.data.headings.filter(((C,A)=>a(A))).map((C=>C.text??C.data));let Y;if(L.selection)if(Array.isArray(L.selection)){Y=[];for(let A=0;A<L.selection.length;A++)Y=Y.concat(C.pages[L.selection[A]-1].map((C=>C.row)))}else Y=C.pages[L.selection-1].map((C=>C.row));else Y=C.data.data;let j=[];if(j[0]=R,j=j.concat(Y.map((C=>C.cells.filter(((C,A)=>a(A))).map((C=>n(C)))))),j.length){let C="";if(j.forEach((A=>{A.forEach((A=>{"string"==typeof A&&(A=(A=(A=(A=(A=A.trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).replace(/#/g,"%23")).includes(",")&&(A=`"${A}"`),C+=A+L.columnDelimiter})),C=C.trim().substring(0,C.length-1),C+=L.lineDelimiter})),C=C.trim().substring(0,C.length-1),L.download){const A=document.createElement("a");A.href=encodeURI(`data:text/csv;charset=utf-8,${C}`),A.download=`${L.filename||"datatable_export"}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A)}return C}return!1},dt=function(C,A={}){if(!C.hasHeadings&&!C.hasRows)return!1;if(!t(A))return!1;const L={download:!0,skipColumn:[],replacer:null,space:4,...A},a=A=>!L.skipColumn.includes(A)&&!C.columns.settings[A]?.hidden;let R;if(L.selection)if(Array.isArray(L.selection)){R=[];for(let A=0;A<L.selection.length;A++)R=R.concat(C.pages[L.selection[A]-1].map((C=>C.row)))}else R=C.pages[L.selection-1].map((C=>C.row));else R=C.data.data;const Y=R.map((C=>C.cells.filter(((C,A)=>a(A))).map((C=>n(C))))),j=C.data.headings.filter(((C,A)=>a(A))).map((C=>C.text??String(C.data)));if(Y.length){const C=[];Y.forEach(((A,L)=>{C[L]=C[L]||{},A.forEach(((A,R)=>{C[L][j[R]]=A}))}));const A=JSON.stringify(C,L.replacer,L.space);if(L.download){const C=new Blob([A],{type:"data:application/json;charset=utf-8"}),R=URL.createObjectURL(C),Y=document.createElement("a");Y.href=R,Y.download=`${L.filename||"datatable_export"}.json`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(R)}return A}return!1},ct=function(C,A={}){if(!C.hasHeadings&&!C.hasRows)return!1;if(!t(A))return!1;const L={download:!0,skipColumn:[],tableName:"myTable",...A},a=A=>!L.skipColumn.includes(A)&&!C.columns.settings[A]?.hidden;let R=[];if(L.selection)if(Array.isArray(L.selection))for(let A=0;A<L.selection.length;A++)R=R.concat(C.pages[L.selection[A]-1].map((C=>C.row)));else R=C.pages[L.selection-1].map((C=>C.row));else R=C.data.data;const Y=R.map((C=>C.cells.filter(((C,A)=>a(A))).map((C=>n(C))))),j=C.data.headings.filter(((C,A)=>a(A))).map((C=>C.text??String(C.data)));if(Y.length){let C=`INSERT INTO \`${L.tableName}\` (`;if(j.forEach((A=>{C+=`\`${A}\`,`})),C=C.trim().substring(0,C.length-1),C+=") VALUES ",Y.forEach((A=>{C+="(",A.forEach((A=>{C+="string"==typeof A?`"${A}",`:`${A},`})),C=C.trim().substring(0,C.length-1),C+="),"})),C=C.trim().substring(0,C.length-1),C+=";",L.download&&(C=`data:application/sql;charset=utf-8,${C}`),L.download){const A=document.createElement("a");A.href=encodeURI(C),A.download=`${L.filename||"datatable_export"}.sql`,document.body.appendChild(A),A.click(),document.body.removeChild(A)}return C}return!1},ht=function(C,A={}){if(!C.hasHeadings&&!C.hasRows)return!1;if(!t(A))return!1;const L={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",...A},a=A=>!L.skipColumn.includes(A)&&!C.columns.settings[A]?.hidden,R=C.data.headings.filter(((C,A)=>a(A))).map((C=>C.text??C.data));let Y;if(L.selection)if(Array.isArray(L.selection)){Y=[];for(let A=0;A<L.selection.length;A++)Y=Y.concat(C.pages[L.selection[A]-1].map((C=>C.row)))}else Y=C.pages[L.selection-1].map((C=>C.row));else Y=C.data.data;let j=[];if(j[0]=R,j=j.concat(Y.map((C=>C.cells.filter(((C,A)=>a(A))).map((C=>n(C)))))),j.length){let C="";if(j.forEach((A=>{A.forEach((A=>{"string"==typeof A&&(A=(A=(A=(A=(A=A.trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).replace(/#/g,"%23")).includes(",")&&(A=`"${A}"`),C+=A+L.columnDelimiter})),C=C.trim().substring(0,C.length-1),C+=L.lineDelimiter})),C=C.trim().substring(0,C.length-1),L.download&&(C=`data:text/csv;charset=utf-8,${C}`),L.download){const A=document.createElement("a");A.href=encodeURI(C),A.download=`${L.filename||"datatable_export"}.txt`,document.body.appendChild(A),A.click(),document.body.removeChild(A)}return C}return!1},mt={classes:{row:"datatable-editor-row",form:"datatable-editor-form",item:"datatable-editor-item",menu:"datatable-editor-menu",save:"datatable-editor-save",block:"datatable-editor-block",cancel:"datatable-editor-cancel",close:"datatable-editor-close",inner:"datatable-editor-inner",input:"datatable-editor-input",label:"datatable-editor-label",modal:"datatable-editor-modal",action:"datatable-editor-action",header:"datatable-editor-header",wrapper:"datatable-editor-wrapper",editable:"datatable-editor-editable",container:"datatable-editor-container",separator:"datatable-editor-separator"},labels:{closeX:"x",editCell:"Edit Cell",editRow:"Edit Row",removeRow:"Remove Row",reallyRemove:"Are you sure?",reallyCancel:"Do you really want to cancel?",save:"Save",cancel:"Cancel"},cancelModal:C=>confirm(C.options.labels.reallyCancel),inline:!0,hiddenColumns:!1,contextMenu:!0,clickEvent:"dblclick",excludeColumns:[],menuItems:[{text:C=>C.options.labels.editCell,action:(C,A)=>{if(!(C.event.target instanceof Element))return;const L=C.event.target.closest("td");return C.editCell(L)}},{text:C=>C.options.labels.editRow,action:(C,A)=>{if(!(C.event.target instanceof Element))return;const L=C.event.target.closest("tr");return C.editRow(L)}},{separator:!0},{text:C=>C.options.labels.removeRow,action:(C,A)=>{if(C.event.target instanceof Element&&confirm(C.options.labels.reallyRemove)){const A=C.event.target.closest("tr");C.removeRow(A)}}}]};class pt{menuOpen;containerDOM;data;disabled;dt;editing;editingCell;editingRow;event;events;initialized;limits;menuDOM;modalDOM;options;originalRowRender;rect;wrapperDOM;constructor(C,A={}){this.dt=C,this.options={...mt,...A}}init(){this.initialized||(this.options.classes.editable?.split(" ").forEach((C=>this.dt.wrapperDOM.classList.add(C))),this.options.inline&&(this.originalRowRender=this.dt.options.rowRender,this.dt.options.rowRender=(C,A,L)=>{let R=this.rowRender(C,A,L);return this.originalRowRender&&(R=this.originalRowRender(C,R,L)),R}),this.options.contextMenu&&(this.containerDOM=s("div",{id:this.options.classes.container}),this.wrapperDOM=s("div",{class:this.options.classes.wrapper}),this.menuDOM=s("ul",{class:this.options.classes.menu}),this.options.menuItems&&this.options.menuItems.length&&this.options.menuItems.forEach((C=>{const A=s("li",{class:C.separator?this.options.classes.separator:this.options.classes.item});if(!C.separator){const L=s("a",{class:this.options.classes.action,href:C.url||"#",html:"function"==typeof C.text?C.text(this):C.text});A.appendChild(L),C.action&&"function"==typeof C.action&&L.addEventListener("click",(A=>{A.preventDefault(),C.action(this,A)}))}this.menuDOM.appendChild(A)})),this.wrapperDOM.appendChild(this.menuDOM),this.containerDOM.appendChild(this.wrapperDOM),this.updateMenu()),this.data={},this.menuOpen=!1,this.editing=!1,this.editingRow=!1,this.editingCell=!1,this.bindEvents(),setTimeout((()=>{this.initialized=!0,this.dt.emit("editable.init")}),10))}bindEvents(){this.events={keydown:this.keydown.bind(this),click:this.click.bind(this)},this.dt.dom.addEventListener(this.options.clickEvent,this.events.click),document.addEventListener("keydown",this.events.keydown),this.options.contextMenu&&(this.events.context=this.context.bind(this),this.events.updateMenu=this.updateMenu.bind(this),this.events.dismissMenu=this.dismissMenu.bind(this),this.events.reset=h((()=>this.events.updateMenu()),50),this.dt.dom.addEventListener("contextmenu",this.events.context),document.addEventListener("click",this.events.dismissMenu),window.addEventListener("resize",this.events.reset),window.addEventListener("scroll",this.events.reset))}context(C){const A=C.target;if(!(A instanceof Element))return;this.event=C;const L=A.closest("tbody td");if(!this.disabled&&L){C.preventDefault();let A=C.pageX,L=C.pageY;A>this.limits.x&&(A-=this.rect.width),L>this.limits.y&&(L-=this.rect.height),this.wrapperDOM.style.top=`${L}px`,this.wrapperDOM.style.left=`${A}px`,this.openMenu(),this.updateMenu()}}click(C){const A=C.target;if(A instanceof Element)if(this.editing&&this.data&&this.editingCell){const C=l(this.options.classes.input),A=this.modalDOM?this.modalDOM.querySelector(`input${C}[type=text]`):this.dt.wrapperDOM.querySelector(`input${C}[type=text]`);this.saveCell(A.value)}else if(!this.editing){const L=A.closest("tbody td");L&&(this.editCell(L),C.preventDefault())}}keydown(C){const A=l(this.options.classes.input);if(this.modalDOM){if("Escape"===C.key)this.options.cancelModal(this)&&this.closeModal();else if("Enter"===C.key)if(this.editingCell){const C=this.modalDOM.querySelector(`input${A}[type=text]`);this.saveCell(C.value)}else{const C=Array.from(this.modalDOM.querySelectorAll(`input${A}[type=text]`)).map((C=>C.value.trim()));this.saveRow(C,this.data.row)}}else if(this.editing&&this.data)if("Enter"===C.key){if(this.editingCell){const C=this.dt.wrapperDOM.querySelector(`input${A}[type=text]`);this.saveCell(C.value)}else if(this.editingRow){const C=Array.from(this.dt.wrapperDOM.querySelectorAll(`input${A}[type=text]`)).map((C=>C.value.trim()));this.saveRow(C,this.data.row)}}else"Escape"===C.key&&(this.editingCell?this.saveCell(this.data.content):this.editingRow&&this.saveRow(null,this.data.row))}editCell(C){const A=o(C.cellIndex,this.dt.columns.settings);if(this.options.excludeColumns.includes(A))return void this.closeMenu();const L=parseInt(C.parentElement.dataset.index,10),R=this.dt.data.data[L].cells[A];this.data={cell:R,rowIndex:L,columnIndex:A,content:n(R)},this.editing=!0,this.editingCell=!0,this.options.inline?this.dt.update():this.editCellModal(),this.closeMenu()}editCellModal(){const C=this.data.cell,A=this.data.columnIndex,L=this.dt.data.headings[A].text||String(this.dt.data.headings[A].data),R=[`<div class='${this.options.classes.inner}'>`,`<div class='${this.options.classes.header}'>`,`<h4>${this.options.labels.editCell}</h4>`,`<button class='${this.options.classes.close}' type='button' data-editor-cancel>${this.options.labels.closeX}</button>`," </div>",`<div class='${this.options.classes.block}'>`,`<form class='${this.options.classes.form}'>`,`<div class='${this.options.classes.row}'>`,`<label class='${this.options.classes.label}'>${a(L)}</label>`,`<input class='${this.options.classes.input}' value='${a(n(C))}' type='text'>`,"</div>",`<div class='${this.options.classes.row}'>`,`<button class='${this.options.classes.cancel}' type='button' data-editor-cancel>${this.options.labels.cancel}</button>`,`<button class='${this.options.classes.save}' type='button' data-editor-save>${this.options.labels.save}</button>`,"</div>","</form>","</div>","</div>"].join(""),Y=s("div",{class:this.options.classes.modal,html:R});this.modalDOM=Y,this.openModal();const j=l(this.options.classes.input),F=Y.querySelector(`input${j}[type=text]`);F.focus(),F.selectionStart=F.selectionEnd=F.value.length,Y.addEventListener("click",(C=>{const A=C.target;A instanceof Element&&(A.hasAttribute("data-editor-cancel")?(C.preventDefault(),this.options.cancelModal(this)&&this.closeModal()):A.hasAttribute("data-editor-save")&&(C.preventDefault(),this.saveCell(F.value)))}))}saveCell(C){const A=this.data.content,L=this.dt.columns.settings[this.data.columnIndex].type||this.dt.options.type,R=C.trim();let Y;if("number"===L)Y={data:parseFloat(R)};else if("boolean"===L)Y=["","false","0"].includes(R)?{data:!1,text:"false",order:0}:{data:!0,text:"true",order:1};else if("html"===L)Y={data:[{nodeName:"#text",data:C}],text:C,order:C};else if("string"===L)Y={data:C};else if("date"===L){const A=this.dt.columns.settings[this.data.columnIndex].format||this.dt.options.format;Y={data:C,order:X(String(C),A)}}else Y={data:C};this.dt.data.data[this.data.rowIndex].cells[this.data.columnIndex]=Y,this.closeModal();const j=this.data.rowIndex,F=this.data.columnIndex;this.data={},this.dt.update(!0),this.editing=!1,this.editingCell=!1,this.dt.emit("editable.save.cell",C,A,j,F)}editRow(C){if(!C||"TR"!==C.nodeName||this.editing)return;const A=parseInt(C.dataset.index,10),L=this.dt.data.data[A];this.data={row:L.cells,rowIndex:A},this.editing=!0,this.editingRow=!0,this.options.inline?this.dt.update():this.editRowModal(),this.closeMenu()}editRowModal(){const C=this.data.row,A=[`<div class='${this.options.classes.inner}'>`,`<div class='${this.options.classes.header}'>`,`<h4>${this.options.labels.editRow}</h4>`,`<button class='${this.options.classes.close}' type='button' data-editor-cancel>${this.options.labels.closeX}</button>`," </div>",`<div class='${this.options.classes.block}'>`,`<form class='${this.options.classes.form}'>`,`<div class='${this.options.classes.row}'>`,`<button class='${this.options.classes.cancel}' type='button' data-editor-cancel>${this.options.labels.cancel}</button>`,`<button class='${this.options.classes.save}' type='button' data-editor-save>${this.options.labels.save}</button>`,"</div>","</form>","</div>","</div>"].join(""),L=s("div",{class:this.options.classes.modal,html:A}),R=L.firstElementChild;if(!R)return;const Y=R.lastElementChild?.firstElementChild;if(!Y)return;C.forEach(((C,A)=>{const L=this.dt.columns.settings[A];if((!L.hidden||L.hidden&&this.options.hiddenColumns)&&!this.options.excludeColumns.includes(A)){const L=this.dt.data.headings[A].text||String(this.dt.data.headings[A].data);Y.insertBefore(s("div",{class:this.options.classes.row,html:[`<div class='${this.options.classes.row}'>`,`<label class='${this.options.classes.label}'>${a(L)}</label>`,`<input class='${this.options.classes.input}' value='${a(n(C))}' type='text'>`,"</div>"].join("")}),Y.lastElementChild)}})),this.modalDOM=L,this.openModal();const j=l(this.options.classes.input),F=Array.from(Y.querySelectorAll(`input${j}[type=text]`));L.addEventListener("click",(C=>{const A=C.target;if(A instanceof Element)if(A.hasAttribute("data-editor-cancel"))this.options.cancelModal(this)&&this.closeModal();else if(A.hasAttribute("data-editor-save")){const C=F.map((C=>C.value.trim()));this.saveRow(C,this.data.row)}}))}saveRow(C,A){const L=A.map((C=>n(C))),R=this.dt.data.data[this.data.rowIndex];if(C){let L=0;R.cells=A.map(((A,R)=>{if(this.options.excludeColumns.includes(R)||this.dt.columns.settings[R].hidden)return A;const Y=this.dt.columns.settings[R].type||this.dt.options.type,j=C[L++];let F;if("number"===Y)F={data:parseFloat(j)};else if("boolean"===Y)F=["","false","0"].includes(j)?{data:!1,text:"false",order:0}:{data:!0,text:"true",order:1};else if("html"===Y)F={data:[{nodeName:"#text",data:j}],text:j,order:j};else if("string"===Y)F={data:j};else if("date"===Y){const C=this.dt.columns.settings[R].format||this.dt.options.format;F={data:j,order:X(String(j),C)}}else F={data:j};return F}))}const Y=R.cells.map((C=>n(C)));this.data={},this.dt.update(!0),this.closeModal(),this.editing=!1,this.dt.emit("editable.save.row",Y,L,A)}openModal(){this.modalDOM&&document.body.appendChild(this.modalDOM)}closeModal(){this.editing&&this.modalDOM&&(document.body.removeChild(this.modalDOM),this.modalDOM=this.editing=this.editingRow=this.editingCell=!1)}removeRow(C){if(!C||"TR"!==C.nodeName||this.editing)return;const A=parseInt(C.dataset.index,10);this.dt.rows.remove(A),this.closeMenu()}updateMenu(){const C=window.scrollX||window.pageXOffset,A=window.scrollY||window.pageYOffset;this.rect=this.wrapperDOM.getBoundingClientRect(),this.limits={x:window.innerWidth+C-this.rect.width,y:window.innerHeight+A-this.rect.height}}dismissMenu(C){const A=C.target;if(!(A instanceof Element)||this.wrapperDOM.contains(A))return;let L=!0;if(this.editing){const C=l(this.options.classes.input);L=!A.matches(`input${C}[type=text]`)}L&&this.closeMenu()}openMenu(){if(this.editing&&this.data&&this.editingCell){const C=l(this.options.classes.input),A=this.modalDOM?this.modalDOM.querySelector(`input${C}[type=text]`):this.dt.wrapperDOM.querySelector(`input${C}[type=text]`);this.saveCell(A.value)}document.body.appendChild(this.containerDOM),this.menuOpen=!0,this.dt.emit("editable.context.open")}closeMenu(){this.menuOpen&&(this.menuOpen=!1,document.body.removeChild(this.containerDOM),this.dt.emit("editable.context.close"))}destroy(){this.dt.dom.removeEventListener(this.options.clickEvent,this.events.click),this.dt.dom.removeEventListener("contextmenu",this.events.context),document.removeEventListener("click",this.events.dismissMenu),document.removeEventListener("keydown",this.events.keydown),window.removeEventListener("resize",this.events.reset),window.removeEventListener("scroll",this.events.reset),document.body.contains(this.containerDOM)&&document.body.removeChild(this.containerDOM),this.options.inline&&(this.dt.options.rowRender=this.originalRowRender),this.initialized=!1}rowRender(C,A,L){if(!this.data||this.data.rowIndex!==L)return A;this.editingCell?A.childNodes[function(C,A){let L=C,R=0;for(;R<C;)A[R].hidden&&(L-=1),R++;return L}(this.data.columnIndex,this.dt.columns.settings)].childNodes=[{nodeName:"INPUT",attributes:{type:"text",value:this.data.content,class:this.options.classes.input}}]:A.childNodes.forEach(((L,R)=>{const Y=o(R,this.dt.columns.settings),j=C[Y];this.options.excludeColumns.includes(Y)||(A.childNodes[R].childNodes=[{nodeName:"INPUT",attributes:{type:"text",value:a(j.text||String(j.data)||""),class:this.options.classes.input}}])}));return A}}const ft=function(C,A={}){const L=new pt(C,A);return C.initialized?L.init():C.on("datatable.init",(()=>L.init())),L},vt={classes:{button:"datatable-column-filter-button",menu:"datatable-column-filter-menu",container:"datatable-column-filter-container",wrapper:"datatable-column-filter-wrapper"},labels:{button:"Filter columns within the table"},hiddenColumns:[]};class gt{addedButtonDOM;menuOpen;buttonDOM;dt;events;initialized;options;menuDOM;containerDOM;wrapperDOM;limits;rect;event;constructor(C,A={}){this.dt=C,this.options={...vt,...A}}init(){if(this.initialized)return;const C=l(this.options.classes.button);let A=this.dt.wrapperDOM.querySelector(C);if(!A){A=s("button",{class:this.options.classes.button,html:""});const C=l(this.dt.options.classes.search),L=this.dt.wrapperDOM.querySelector(C);L?L.appendChild(A):this.dt.wrapperDOM.appendChild(A),this.addedButtonDOM=!0}this.buttonDOM=A,this.containerDOM=s("div",{id:this.options.classes.container}),this.wrapperDOM=s("div",{class:this.options.classes.wrapper}),this.menuDOM=s("ul",{class:this.options.classes.menu,html:this.dt.data.headings.map(((C,A)=>{const L=this.dt.columns.settings[A];return this.options.hiddenColumns.includes(A)?"":`<li data-column="${A}">\n                        <input type="checkbox" value="${C.text||C.data}" ${L.hidden?"":"checked=''"}>\n                        <label>\n                            ${C.text||C.data}\n                        </label>\n                    </li>`})).join("")}),this.wrapperDOM.appendChild(this.menuDOM),this.containerDOM.appendChild(this.wrapperDOM),this._measureSpace(),this._bind(),this.initialized=!0}dismiss(){this.addedButtonDOM&&this.buttonDOM.parentElement&&this.buttonDOM.parentElement.removeChild(this.buttonDOM),document.removeEventListener("click",this.events.click)}_bind(){this.events={click:this._click.bind(this)},document.addEventListener("click",this.events.click)}_openMenu(){document.body.appendChild(this.containerDOM),this._measureSpace(),this.menuOpen=!0,this.dt.emit("columnFilter.menu.open")}_closeMenu(){this.menuOpen&&(this.menuOpen=!1,document.body.removeChild(this.containerDOM),this.dt.emit("columnFilter.menu.close"))}_measureSpace(){const C=window.scrollX||window.pageXOffset,A=window.scrollY||window.pageYOffset;this.rect=this.wrapperDOM.getBoundingClientRect(),this.limits={x:window.innerWidth+C-this.rect.width,y:window.innerHeight+A-this.rect.height}}_click(C){const A=C.target;if(A instanceof Element)if(this.event=C,this.buttonDOM.contains(A)){if(C.preventDefault(),this.menuOpen)return void this._closeMenu();this._openMenu();let A=C.pageX,L=C.pageY;A>this.limits.x&&(A-=this.rect.width),L>this.limits.y&&(L-=this.rect.height),this.wrapperDOM.style.top=`${L}px`,this.wrapperDOM.style.left=`${A}px`}else if(this.menuDOM.contains(A)){const C=l(this.options.classes.menu),L=A.closest(`${C} > li`);if(!L)return;const R=L.querySelector("input[type=checkbox]");R.contains(A)||(R.checked=!R.checked);const Y=Number(L.dataset.column);R.checked?this.dt.columns.show([Y]):this.dt.columns.hide([Y])}else this.menuOpen&&this._closeMenu()}}const bt=function(C,A={}){const L=new gt(C,A);return C.initialized?L.init():C.on("datatable.init",(()=>L.init())),L};export{at as DataTable,bt as addColumnFilter,ot as convertCSV,rt as convertJSON,s as createElement,lt as exportCSV,dt as exportJSON,ct as exportSQL,ht as exportTXT,e as isJson,t as isObject,ft as makeEditable};

